# ğŸ¤– Anthropic API From Scratch with Streamlit

## åŒ…æ‹¬çš„ãªå­¦ç¿’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ - ã‚¹ã‚¯ãƒ©ãƒƒãƒã§ Anthropic API + Streamlit
- If you prefer English, please use translation tools like Google Translate to read the English version.
#### ä¸»è¦ãªAnthropic API(SDK)ã¯ç¶²ç¾…ã—ã¦ã„ã¾ã™ã€‚
- ãƒ—ãƒ­ã‚°ãƒ©ãƒ ï¼ˆ9å€‹ï¼‰
- å·£éƒ¨ãƒ—ãƒ­ã‚°ãƒ©ãƒ ï¼ˆ49å€‹ï¼‰

## OpenAI API -> Anthropic API ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼šä»•æ§˜æ›¸
[OpenAPAPI->Anthropic API migration ä»•æ§˜æ›¸]
[Migration](doc/openai_to_anthropic_migration_spec.md)

---
## ğŸ”— é–¢é€£ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ## ğŸ”— é–¢é€£ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ


| ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ                                                             | èª¬æ˜                                         | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
| ------------------------------------------------------------------------ | -------------------------------------------- | ---------- |
| [openai_api_jp](https://github.com/nakashima2toshio/openai_api_jp)       | OpenAI APIå®Œå…¨ã‚¬ã‚¤ãƒ‰ï¼ˆæœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼‰       | âœ… å…¬é–‹ä¸­  |
| [anthropic_api_jp](https://github.com/nakashima2toshio/anthropic_api_jp) | Anthropic Claude APIæ´»ç”¨                     | âœ… å…¬é–‹ä¸­  |
| [openai_rag_jp](https://github.com/nakashima2toshio/openai_rag_jp)       | RAGå®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³é›†ï¼ˆcloudç‰ˆã€Local-Qdrantç‰ˆï¼‰ | âœ… å…¬é–‹ä¸­  |
| [openai_mcp_jp](https://github.com/nakashima2toshio/openai_mcp_jp)       | MCP(Model Context Protocol)å®Ÿè£…              | ğŸš§ æ•´å‚™ä¸­  |
| [openai_django_jp](https://github.com/nakashima2toshio/openai_django_jp) | OpenAI API + Djangoå®Ÿè£…                      | âœ… å…¬é–‹ä¸­  |
| [openai_agent_jp](https://github.com/nakashima2toshio/openai_agent_jp)   | AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ§‹ç¯‰                           | ğŸ“ ä½œæˆä¸­  |


## ğŸ“– ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€Anthropic Claude APIã®ç¿’å¾—ã‚’ä¸»çœ¼ã¨ã—ãŸåŒ…æ‹¬çš„ãªå­¦ç¿’ãƒªã‚½ãƒ¼ã‚¹ã§ã™ã€‚åŸºæœ¬çš„ãªãƒ†ã‚­ã‚¹ãƒˆç”Ÿæˆã‹ã‚‰é«˜åº¦ãªãƒãƒ«ãƒãƒ¢ãƒ¼ãƒ€ãƒ«å‡¦ç†ã€æ§‹é€ åŒ–å‡ºåŠ›ã€æ¨è«–ãƒ‘ã‚¿ãƒ¼ãƒ³ã¾ã§ã€30ä»¥ä¸Šã®å®Ÿè·µçš„ãªãƒ‡ãƒ¢ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’é€šã˜ã¦æ®µéšçš„ã«å­¦ç¿’ã§ãã¾ã™ã€‚

### ğŸ¯ ä¸»ãªç‰¹å¾´

- **ä½“ç³»çš„ãªå­¦ç¿’ãƒ‘ã‚¹**: åˆå¿ƒè€…ã‹ã‚‰ä¸Šç´šè€…ã¾ã§æ®µéšçš„ã«å­¦ç¿’å¯èƒ½
- **å®Ÿè·µçš„ãªãƒ‡ãƒ¢**: 7ã¤ã®ä¸»è¦ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€30ä»¥ä¸Šã®ãƒ‡ãƒ¢ãƒ‘ã‚¿ãƒ¼ãƒ³
- **å®Œå…¨ãªæ—¥æœ¬èªå¯¾å¿œ**: UIã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®å®Œå…¨æ—¥æœ¬èªåŒ–
- **çµ±åˆãƒ˜ãƒ«ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒ–ãƒ©ãƒª**: åŠ¹ç‡çš„ãªé–‹ç™ºã‚’æ”¯æ´ã™ã‚‹å…±é€šæ©Ÿèƒ½
- **è©³ç´°ãªæŠ€è¡“æ–‡æ›¸**: å„æ©Ÿèƒ½ã®è¨­è¨ˆæ›¸ã¨IPOï¼ˆInput-Process-Outputï¼‰ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

---

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### ç’°å¢ƒæº–å‚™

è©³ç´°ãªç’°å¢ƒæ§‹ç¯‰æ‰‹é †: [README_preparation.md](./README_preparation.md)

```bash
# 1. ãƒªãƒã‚¸ãƒˆãƒªã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/nakashima2toshio/anthropic_api_jp.git
cd anthropic_api_jp

# 2. ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install -r requirements.txt

# 3. ç’°å¢ƒå¤‰æ•°è¨­å®š
export ANTHROPIC_API_KEY='your-anthropic-api-key'

# 4. åŸºæœ¬ãƒ‡ãƒ¢å®Ÿè¡Œ
streamlit run a10_00_responses_api.py --server.port=8501
```

### å¿…è¦ãªç’°å¢ƒ

- **OS**: macOS / Linux / Windows
- **Python**: 3.8ä»¥ä¸Š
- **ãƒ¡ãƒ¢ãƒª**: 4GBä»¥ä¸Šæ¨å¥¨
- **Anthropic API**: Tier2ä»¥ä¸Šã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆ$40ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆæ¨å¥¨ï¼‰

---

## ğŸ“š å­¦ç¿’ã‚³ãƒ³ãƒ†ãƒ³ãƒ„

### ğŸ“ Anthropic APIé€Ÿç¿’

- **[a0_simple_api.ipynb](./a0_simple_api.ipynb)** - Jupyter Notebookã§APIåŸºç¤ã‚’å­¦ç¿’

### ğŸ—ï¸ ä¸»è¦ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³

#### 1ï¸âƒ£ [a10_00_responses_api.py](./a10_00_responses_api.py) - **çµ±åˆAPIãƒ‡ãƒ¢**

åŒ…æ‹¬çš„ãªClaude APIæ©Ÿèƒ½ã‚’ä½“é¨“ã§ãã‚‹çµ±åˆãƒ‡ãƒ¢ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³


| æ©Ÿèƒ½                   | èª¬æ˜                                    | æŠ€è¡“è¦ç´               |
| ---------------------- | --------------------------------------- | --------------------- |
| ğŸ¤–**ãƒ†ã‚­ã‚¹ãƒˆå¿œç­”**     | ãƒ¯ãƒ³ã‚·ãƒ§ãƒƒãƒˆãƒ»ãƒ¡ãƒ¢ãƒªå¯¾å¿œã®å¯¾è©±ã‚·ã‚¹ãƒ†ãƒ   | `messages.create` API |
| ğŸ–¼ï¸**ãƒãƒ«ãƒãƒ¢ãƒ¼ãƒ€ãƒ«** | ç”»åƒå…¥åŠ›ï¼ˆURLãƒ»Base64ï¼‰ã‹ã‚‰ãƒ†ã‚­ã‚¹ãƒˆç”Ÿæˆ | Vision API            |
| ğŸ“Š**æ§‹é€ åŒ–å‡ºåŠ›**       | Pydanticãƒ¢ãƒ‡ãƒ«ã«ã‚ˆã‚‹å‹å®‰å…¨ãªå‡ºåŠ›        | Structured Outputs    |
| ğŸŒ¤ï¸**å¤–éƒ¨APIé€£æº**    | OpenWeatherMap APIã¨ã®çµ±åˆ              | Function Calling      |
| ğŸ“**ãƒ•ã‚¡ã‚¤ãƒ«æ¤œç´¢**     | Vector Storeä½¿ç”¨ã®RAGæ©Ÿèƒ½               | Embeddings            |
| ğŸŒ**Webæ¤œç´¢**          | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ Webæ¤œç´¢ãƒ„ãƒ¼ãƒ«               | Tool Use              |
| ğŸ’»**Computer Use**     | AIè‡ªå‹•æ“ä½œãƒ‡ãƒ¢                          | Advanced Features     |
| ğŸ§ **æ¨è«–ãƒ¢ãƒ‡ãƒ«**       | o1/o3/o4ã‚·ãƒªãƒ¼ã‚ºå¯¾å¿œ                    | Reasoning Models      |

ğŸ“„ **è©³ç´°è¨­è¨ˆæ›¸**: [doc/a00_responses_api.md](./doc/a00_responses_api.md)

---

#### 2ï¸âƒ£ [a10_01_structured_outputs_parse_schema.py](./a10_01_structured_outputs_parse_schema.py) - **æ§‹é€ åŒ–å‡ºåŠ›**

Pydanticã‚¹ã‚­ãƒ¼ãƒæ¤œè¨¼ã‚’ç”¨ã„ãŸå‹å®‰å…¨ãªæ§‹é€ åŒ–å‡ºåŠ›ã®å®Ÿè£…


| ãƒ‘ã‚¿ãƒ¼ãƒ³                   | èª¬æ˜                                 | ç”¨é€”      |
| -------------------------- | ------------------------------------ | --------- |
| ğŸ“…**ã‚¤ãƒ™ãƒ³ãƒˆæŠ½å‡º**         | ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±ã‚’æ§‹é€ åŒ–æŠ½å‡º | æƒ…å ±æŠ½å‡º  |
| ğŸ“¦**å•†å“æƒ…å ±**             | å•†å“ãƒ‡ãƒ¼ã‚¿ã®æ§‹é€ åŒ–å‡¦ç†               | Eã‚³ãƒãƒ¼ã‚¹ |
| ğŸ‘¤**ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«** | ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã®å‹å®‰å…¨ãªç®¡ç†           | CRM       |
| ğŸ§‘**äººç‰©æƒ…å ±**             | è¤‡é›‘ãªäººç‰©ãƒ‡ãƒ¼ã‚¿ã®éšå±¤æ§‹é€ åŒ–         | HRç®¡ç†    |

ğŸ“„ **è©³ç´°è¨­è¨ˆæ›¸**: [doc/a01_structured_outputs_parse_schema.md](./doc/a01_structured_outputs_parse_schema.md)

---

#### 3ï¸âƒ£ [a10_02_responses_tools_pydantic_parse.py](./a10_02_responses_tools_pydantic_parse.py) - **ãƒ„ãƒ¼ãƒ«ä½¿ç”¨**

Function Callingã¨Tool Useãƒ‘ã‚¿ãƒ¼ãƒ³ã®å®Ÿè£…


| ãƒ‡ãƒ¢                   | èª¬æ˜                     | å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ |
| ---------------------- | ------------------------ | ------------ |
| ğŸŒ¤ï¸**å¤©æ°—å–å¾—**       | OpenWeatherMapé€£æº       | å¤–éƒ¨APIçµ±åˆ  |
| ğŸ“°**ãƒ‹ãƒ¥ãƒ¼ã‚¹æ¤œç´¢**     | ãƒ‹ãƒ¥ãƒ¼ã‚¹æƒ…å ±ã®å–å¾—ã¨æ•´å½¢ | ãƒ‡ãƒ¼ã‚¿å–å¾—   |
| ğŸ§®**è¨ˆç®—ãƒ„ãƒ¼ãƒ«**       | æ•°å¼è¨ˆç®—ã®å®Ÿè¡Œ           | è¨ˆç®—å‡¦ç†     |
| ğŸ”**FAQæ¤œç´¢**          | è³ªå•å¿œç­”ã‚·ã‚¹ãƒ†ãƒ          | æ¤œç´¢æ©Ÿèƒ½     |
| ğŸ“‹**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†** | ã‚¿ã‚¹ã‚¯ã®éšå±¤æ§‹é€ ç®¡ç†     | è¤‡é›‘ãªæ§‹é€    |

ğŸ“„ **è©³ç´°è¨­è¨ˆæ›¸**: [doc/a02_responses_tools_pydantic_parse.md](./doc/a02_responses_tools_pydantic_parse.md)

---

#### 4ï¸âƒ£ [a10_03_images_and_vision.py](./a10_03_images_and_vision.py) - **ç”»åƒå‡¦ç†**

Vision APIã‚’ç”¨ã„ãŸãƒãƒ«ãƒãƒ¢ãƒ¼ãƒ€ãƒ«å‡¦ç†


| æ©Ÿèƒ½                   | å…¥åŠ›å½¢å¼         | å‡ºåŠ›               |
| ---------------------- | ---------------- | ------------------ |
| ğŸ–¼ï¸**URLç”»åƒåˆ†æ**    | ç”»åƒURL          | ãƒ†ã‚­ã‚¹ãƒˆèª¬æ˜ãƒ»åˆ†æ |
| ğŸ“¤**ãƒ­ãƒ¼ã‚«ãƒ«ç”»åƒåˆ†æ** | Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ | è©³ç´°ãªç”»åƒè§£é‡ˆ     |

ğŸ“„ **è©³ç´°è¨­è¨ˆæ›¸**: [doc/a03_images_and_vision.md](./doc/a03_images_and_vision.md)

---

#### 5ï¸âƒ£ [a10_04_audio_speeches.py](./a10_04_audio_speeches.py) - **éŸ³å£°å‡¦ç†**

éŸ³å£°å‡¦ç†çµ±åˆãƒ‘ã‚¿ãƒ¼ãƒ³ã®ãƒ‡ãƒ¢å®Ÿè£…


| æ©Ÿèƒ½                   | èª¬æ˜                   | çµ±åˆã‚µãƒ¼ãƒ“ã‚¹ |
| ---------------------- | ---------------------- | ------------ |
| ğŸ¤**Text-to-Speech**   | ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰éŸ³å£°ç”Ÿæˆ   | å¤–éƒ¨TTS      |
| ğŸ§**Speech-to-Text**   | éŸ³å£°ã‹ã‚‰ãƒ†ã‚­ã‚¹ãƒˆå¤‰æ›   | å¤–éƒ¨STT      |
| ğŸŒ**éŸ³å£°ç¿»è¨³**         | éŸ³å£°ã®å¤šè¨€èªç¿»è¨³       | ç¿»è¨³API      |
| âš¡**ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å‡¦ç†** | ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°éŸ³å£°å‡¦ç† | WebSocket    |
| ğŸ¤–**éŸ³å£°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ** | éŸ³å£°å¯¾è©±ã‚·ã‚¹ãƒ†ãƒ        | ãƒã‚§ãƒ¼ãƒ³å‡¦ç† |

ğŸ“„ **è©³ç´°è¨­è¨ˆæ›¸**: [doc/a04_audio_speeches.md](./doc/a04_audio_speeches.md)

---

#### 6ï¸âƒ£ [a10_05_conversation_state.py](./a10_05_conversation_state.py) - **ä¼šè©±çŠ¶æ…‹ç®¡ç†**

çŠ¶æ…‹ç®¡ç†ã¨ãƒ„ãƒ¼ãƒ«ä½¿ç”¨ã®é«˜åº¦ãªå®Ÿè£…


| æ©Ÿèƒ½                 | èª¬æ˜                       | æŠ€è¡“è¦ç´            |
| -------------------- | -------------------------- | ------------------ |
| ğŸ’¬**çŠ¶æ…‹ç¶­æŒä¼šè©±**   | ä¼šè©±å±¥æ­´ã®æ°¸ç¶šåŒ–ã¨ç®¡ç†     | Session State      |
| ğŸ”§**ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œ**     | ã‚«ã‚¹ã‚¿ãƒ ãƒ„ãƒ¼ãƒ«ã®å®šç¾©ã¨å®Ÿè¡Œ | Tool Use           |
| ğŸŒ¤ï¸**é–¢æ•°å‘¼ã³å‡ºã—** | å¤–éƒ¨APIã¨ã®é€£æº            | Function Calling   |
| ğŸ“Š**æ§‹é€ åŒ–å¿œç­”**     | å‹å®‰å…¨ãªãƒ„ãƒ¼ãƒ«å¼•æ•°å‡¦ç†     | Pydantic           |
| ğŸ”„**ãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ—** | æ–‡è„ˆèªè­˜ã®é€£ç¶šå¯¾è©±         | Context Management |

ğŸ“„ **è©³ç´°è¨­è¨ˆæ›¸**: [doc/a05_conversation_state.md](./doc/a05_conversation_state.md)

---

#### 7ï¸âƒ£ [a10_06_reasoning_chain_of_thought.py](./a10_06_reasoning_chain_of_thought.py) - **æ¨è«–ãƒ‘ã‚¿ãƒ¼ãƒ³**

Chain of Thoughtï¼ˆCoTï¼‰æ¨è«–ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å®Ÿè£…


| ãƒ‘ã‚¿ãƒ¼ãƒ³               | èª¬æ˜                 | é©ç”¨ä¾‹                 |
| ---------------------- | -------------------- | ---------------------- |
| ğŸ“**æ®µéšçš„æ¨è«–**       | å•é¡Œã‚’é †åºç«‹ã¦ã¦è§£æ±º | æ•°å­¦å•é¡Œã€ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ  |
| ğŸ”¬**ä»®èª¬æ¤œè¨¼**         | ç§‘å­¦çš„æ‰‹æ³•ã«ã‚ˆã‚‹æ¤œè¨¼ | ãƒã‚°è§£æã€å®Ÿé¨“è¨ˆç”»     |
| ğŸŒ³**æ€è€ƒã®æœ¨æ¢ç´¢**     | è¤‡æ•°ãƒ‘ã‚¹ã®æ¢ç´¢ã¨è©•ä¾¡ | ãƒ‘ã‚ºãƒ«ã€æœ€é©åŒ–         |
| âš–ï¸**è³›å¦åˆ†æ**       | æ„æ€æ±ºå®šã®ãŸã‚ã®æ¯”è¼ƒ | æŠ€è¡“é¸å®šã€åˆ¤æ–­         |
| ğŸ”„**è¨ˆç”»å®Ÿè¡ŒæŒ¯ã‚Šè¿”ã‚Š** | åå¾©çš„æ”¹å–„ãƒ—ãƒ­ã‚»ã‚¹   | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†       |

ğŸ“„ **è©³ç´°è¨­è¨ˆæ›¸**: [doc/a06_reasoning_chain_of_thought.md](./doc/a06_reasoning_chain_of_thought.md)

---

## ğŸ› ï¸ å…±é€šãƒ©ã‚¤ãƒ–ãƒ©ãƒª

### [helper_api.py](./helper_api.py) - **APIãƒ˜ãƒ«ãƒ‘ãƒ¼**

Anthropic APIæ“ä½œã®çµ±åˆãƒ˜ãƒ«ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒ–ãƒ©ãƒª


| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ          | æ©Ÿèƒ½                | ç‰¹å¾´                    |
| ----------------------- | ------------------- | ----------------------- |
| âš™ï¸**ConfigManager**   | YAMLè¨­å®šç®¡ç†        | ã‚·ãƒ³ã‚°ãƒ«ãƒˆãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³    |
| ğŸ’¾**MemoryCache**       | é«˜é€Ÿã‚­ãƒ£ãƒƒã‚·ãƒ¥      | TTLä»˜ããƒ¡ãƒ¢ãƒªã‚­ãƒ£ãƒƒã‚·ãƒ¥ |
| ğŸ’¬**MessageManager**    | ä¼šè©±å±¥æ­´ç®¡ç†        | è‡ªå‹•åˆ¶é™ç®¡ç†            |
| ğŸ”¢**TokenManager**      | ãƒˆãƒ¼ã‚¯ãƒ³ç®¡ç†        | ã‚³ã‚¹ãƒˆæ¨å®šæ©Ÿèƒ½          |
| ğŸ“Š**ResponseProcessor** | ãƒ¬ã‚¹ãƒãƒ³ã‚¹å‡¦ç†      | è‡ªå‹•æ•´å½¢ãƒ»ä¿å­˜          |
| ğŸ”Œ**AnthropicClient**   | APIçµ±åˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ | ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½ä»˜ã        |

ğŸ“„ **è©³ç´°è¨­è¨ˆæ›¸**: [doc/helper_api.md](./doc/helper_api.md)

### [helper_st.py](./helper_st.py) - **UIãƒ˜ãƒ«ãƒ‘ãƒ¼**

Streamlit UIé–‹ç™ºæ”¯æ´ãƒ©ã‚¤ãƒ–ãƒ©ãƒª


| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ            | æ©Ÿèƒ½             | ç‰¹å¾´                     |
| ------------------------- | ---------------- | ------------------------ |
| ğŸ¨**UIHelper**            | UIè¦ç´ ã®çµ±ä¸€ç®¡ç† | å†åˆ©ç”¨å¯èƒ½ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ |
| ğŸ’¬**MessageManagerUI**    | ä¼šè©±UIç®¡ç†       | ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹çµ±åˆ       |
| ğŸ“Š**ResponseProcessorUI** | ãƒ¬ã‚¹ãƒãƒ³ã‚¹è¡¨ç¤º   | ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–è¡¨ç¤º     |
| ğŸ’¾**SessionStateManager** | çŠ¶æ…‹ç®¡ç†         | æ°¸ç¶šåŒ–å¯¾å¿œ               |
| ğŸ“ˆ**InfoPanelManager**    | æƒ…å ±ãƒ‘ãƒãƒ«       | ã‚³ã‚¹ãƒˆãƒ»æ€§èƒ½è¡¨ç¤º         |
| ğŸ¯**DemoBase**            | ãƒ‡ãƒ¢åŸºåº•ã‚¯ãƒ©ã‚¹   | å…±é€šå‡¦ç†ã®æŠ½è±¡åŒ–         |

ğŸ“„ **è©³ç´°è¨­è¨ˆæ›¸**: [doc/helper_st.md](./doc/helper_st.md)

---

## ğŸ“Š æŠ€è¡“ä»•æ§˜

### å¯¾å¿œãƒ¢ãƒ‡ãƒ«


| ã‚«ãƒ†ã‚´ãƒª      | ãƒ¢ãƒ‡ãƒ«            | ç‰¹å¾´                   |
| ------------- | ----------------- | ---------------------- |
| **Flagship**  | Claude Opus 4.1   | æœ€é«˜æ€§èƒ½ã€è¤‡é›‘ãªã‚¿ã‚¹ã‚¯ |
| **Balanced**  | Claude Sonnet 4   | ãƒãƒ©ãƒ³ã‚¹å‹ã€æ±ç”¨       |
| **Fast**      | Claude 3.5 Haiku  | é«˜é€Ÿã€è»½é‡ã‚¿ã‚¹ã‚¯       |
| **Vision**    | Claude 3.5 Sonnet | ç”»åƒå‡¦ç†å¯¾å¿œ           |
| **Reasoning** | o1/o3/o4ã‚·ãƒªãƒ¼ã‚º  | é«˜åº¦ãªæ¨è«–             |

### ä¸»è¦æ©Ÿèƒ½


| æ©Ÿèƒ½               | èª¬æ˜                 | å®Ÿè£…çŠ¶æ³        |
| ------------------ | -------------------- | --------------- |
| Messages API       | åŸºæœ¬çš„ãªå¯¾è©±         | âœ… å®Œå…¨å®Ÿè£…     |
| Vision API         | ç”»åƒå‡¦ç†             | âœ… å®Œå…¨å®Ÿè£…     |
| Structured Outputs | æ§‹é€ åŒ–å‡ºåŠ›           | âœ… å®Œå…¨å®Ÿè£…     |
| Tool Use           | ãƒ„ãƒ¼ãƒ«ä½¿ç”¨           | âœ… å®Œå…¨å®Ÿè£…     |
| Function Calling   | é–¢æ•°å‘¼ã³å‡ºã—         | âœ… å®Œå…¨å®Ÿè£…     |
| Streaming          | ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å¿œç­”   | âœ… å®Ÿè£…æ¸ˆã¿     |
| Caching            | ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚­ãƒ£ãƒƒã‚·ãƒ¥ | âœ… å®Ÿè£…æ¸ˆã¿     |
| Token Counting     | ãƒˆãƒ¼ã‚¯ãƒ³ç®¡ç†         | âœ… tiktokenå¯¾å¿œ |

---

## ğŸ¯ å­¦ç¿’ãƒ‘ã‚¹

### ğŸ“š åˆå¿ƒè€…å‘ã‘ï¼ˆåŸºç¤ï¼‰

1. **a0_simple_api.ipynb** - Jupyter Notebookã§APIã®åŸºç¤ã‚’å­¦ç¿’
2. **a10_00_responses_api.py** - çµ±åˆãƒ‡ãƒ¢ã§å…¨æ©Ÿèƒ½ã‚’ä½“é¨“
3. **a10_01_structured_outputs_parse_schema.py** - æ§‹é€ åŒ–å‡ºåŠ›ã®åŸºæœ¬

### ğŸ”§ ä¸­ç´šè€…å‘ã‘ï¼ˆå¿œç”¨ï¼‰

4. **a10_02_responses_tools_pydantic_parse.py** - ãƒ„ãƒ¼ãƒ«ä½¿ç”¨ã¨Pydanticæ´»ç”¨
5. **a10_03_images_and_vision.py** - ãƒãƒ«ãƒãƒ¢ãƒ¼ãƒ€ãƒ«å‡¦ç†
6. **a10_05_conversation_state.py** - çŠ¶æ…‹ç®¡ç†ã®å®Ÿè£…

### ğŸš€ ä¸Šç´šè€…å‘ã‘ï¼ˆç™ºå±•ï¼‰

7. **a10_06_reasoning_chain_of_thought.py** - é«˜åº¦ãªæ¨è«–ãƒ‘ã‚¿ãƒ¼ãƒ³
8. **a10_04_audio_speeches.py** - éŸ³å£°å‡¦ç†çµ±åˆï¼ˆå¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹é€£æºï¼‰
9. ã‚«ã‚¹ã‚¿ãƒ ãƒ„ãƒ¼ãƒ«ãƒ»ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å®Ÿè£…

---

## ğŸ–¥ï¸ å®Ÿè¡Œæ–¹æ³•

å„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ç‹¬ç«‹ã—ãŸStreamlitã‚¢ãƒ—ãƒªã¨ã—ã¦å®Ÿè¡Œã§ãã¾ã™ã€‚ãƒãƒ¼ãƒˆç•ªå·ã¯ç’°å¢ƒã«å¿œã˜ã¦èª¿æ•´ã—ã¦ãã ã•ã„ã€‚

```bash
# çµ±åˆAPIãƒ‡ãƒ¢
streamlit run a10_00_responses_api.py --server.port=8501

# æ§‹é€ åŒ–å‡ºåŠ›ãƒ‡ãƒ¢
streamlit run a10_01_structured_outputs_parse_schema.py --server.port=8502

# ãƒ„ãƒ¼ãƒ«ä½¿ç”¨ãƒ‡ãƒ¢
streamlit run a10_02_responses_tools_pydantic_parse.py --server.port=8503

# ç”»åƒå‡¦ç†ãƒ‡ãƒ¢
streamlit run a10_03_images_and_vision.py --server.port=8504

# éŸ³å£°å‡¦ç†ãƒ‡ãƒ¢
streamlit run a10_04_audio_speeches.py --server.port=8505

# ä¼šè©±çŠ¶æ…‹ç®¡ç†ãƒ‡ãƒ¢
streamlit run a10_05_conversation_state.py --server.port=8506

# æ¨è«–ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒ‡ãƒ¢
streamlit run a10_06_reasoning_chain_of_thought.py --server.port=8507
```

---

## ğŸ”§ è¨­å®šã¨ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

### ç’°å¢ƒå¤‰æ•°

```bash
# å¿…é ˆ
export ANTHROPIC_API_KEY='your-anthropic-api-key'

# ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆç‰¹å®šæ©Ÿèƒ½ã§ä½¿ç”¨ï¼‰
export OPENWEATHER_API_KEY='your-openweather-api-key'  # å¤©æ°—æƒ…å ±å–å¾—
export EXCHANGERATE_API_KEY='your-exchangerate-api-key'  # ç‚ºæ›¿ãƒ¬ãƒ¼ãƒˆ
export LOG_LEVEL='INFO'  # ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«è¨­å®š
export DEBUG_MODE='false'  # ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰
```

### è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆconfig.ymlï¼‰

```yaml
models:
  default: "claude-3-5-sonnet-20241022"
  categories:
    flagship: ["claude-opus-4-1-20250805"]
    balanced: ["claude-sonnet-4-20250514"]
    fast: ["claude-3-5-haiku-20241022"]

api:
  timeout: 30
  max_retries: 3
  message_limit: 50

cache:
  enabled: true
  ttl: 3600
  max_size: 100

ui:
  theme: "light"
  language: "ja"
  show_timestamps: true
```

---

## ğŸ“¸ ç”»é¢ä¾‹

### ãƒ¡ã‚¤ãƒ³ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹

![Main Interface](assets/image_a10_00.png)

### IPOï¼ˆInput-Process-Outputï¼‰è¡¨ç¤º

![IPO Display](assets/image_a10_01.png)

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆ

```bash
# å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
pytest -v

# ã‚«ãƒãƒ¬ãƒƒã‚¸æ¸¬å®š
pytest --cov

# ç‰¹å®šã‚«ãƒ†ã‚´ãƒªã®ãƒ†ã‚¹ãƒˆ
pytest -m unit      # ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
pytest -m api       # APIãƒ†ã‚¹ãƒˆ
pytest -m slow      # é•·æ™‚é–“ãƒ†ã‚¹ãƒˆ
```

---

## ğŸ“š é–¢é€£ãƒªã‚½ãƒ¼ã‚¹

### å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [Anthropic Claude API Documentation](https://docs.anthropic.com/)
- [Streamlit Documentation](https://docs.streamlit.io/)
- [Pydantic Documentation](https://docs.pydantic.dev/)

---

## ğŸ¤ ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³

ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚„ Issue ã®ä½œæˆã‚’æ­“è¿ã—ã¾ã™ã€‚å¤§ããªå¤‰æ›´ã®å ´åˆã¯ã€ã¾ãš Issue ã‚’ä½œæˆã—ã¦å¤‰æ›´å†…å®¹ã‚’è­°è«–ã—ã¦ãã ã•ã„ã€‚

---

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯æ•™è‚²ç›®çš„ã§ä½œæˆã•ã‚Œã¦ã„ã¾ã™ã€‚å•†ç”¨åˆ©ç”¨ã®éš›ã¯ã€Anthropic API ã®åˆ©ç”¨è¦ç´„ã‚’ã”ç¢ºèªãã ã•ã„ã€‚

---

## ğŸ‘¨â€ğŸ’» ä½œè€…

**Toshio Nakashima**

- GitHub: [@nakashima2toshio](https://github.com/nakashima2toshio)

---

## ğŸ™ è¬è¾

- Anthropic ãƒãƒ¼ãƒ  - å„ªã‚ŒãŸ Claude API ã®æä¾›
- Streamlit ãƒãƒ¼ãƒ  - ç›´æ„Ÿçš„ãª Web UI ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã®çš†æ§˜ - ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã¨æ”¹å–„ææ¡ˆ

---

*æœ€çµ‚æ›´æ–°: 2025å¹´1æœˆ*
