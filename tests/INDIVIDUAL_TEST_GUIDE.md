# Anthropic API ãƒ‡ãƒ¢ å€‹åˆ¥ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ†ã‚¹ãƒˆã‚¬ã‚¤ãƒ‰

# 2. ã‚«ãƒãƒ¬ãƒ¼ã‚¸ä»˜ããƒ†ã‚¹ãƒˆï¼ˆALL Testï¼‰

pytest --cov --cov-report=term-missing

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ãƒ†ã‚¹ãƒˆã‚³ãƒãƒ³ãƒ‰

### ã‚«ãƒãƒ¬ãƒ¼ã‚¸ä»˜ããƒ†ã‚¹ãƒˆå®Ÿè¡Œ

```bash
# a00_responses_api.py
python -m pytest tests/unit/test_a00_responses_api.py \
  --cov=a00_responses_api \
  --cov-report=term-missing

# a01_structured_outputs_parse_schema.py
python -m pytest tests/unit/test_a01_structured_outputs_parse_schema.py \
  --cov=a01_structured_outputs_parse_schema \
  --cov-report=term-missing

# a02_responses_tools_pydantic_parse.py
python -m pytest tests/unit/test_a02_responses_tools_pydantic_parse.py \
  --cov=a02_responses_tools_pydantic_parse \
  --cov-report=term-missing

# a03_images_and_vision.py
python -m pytest tests/unit/test_a03_images_and_vision.py \
  --cov=a03_images_and_vision \
  --cov-report=term-missing

# a04_audio_speeches.py
python -m pytest tests/unit/test_a04_audio_speeches.py \
  --cov=a04_audio_speeches \
  --cov-report=term-missing

# a05_conversation_state.py
python -m pytest tests/unit/test_a05_conversation_state.py \
  --cov=a05_conversation_state \
  --cov-report=term-missing

# a06_reasoning_chain_of_thought.py
python -m pytest tests/unit/test_a06_reasoning_chain_of_thought.py \
  --cov=a06_reasoning_chain_of_thought \
  --cov-report=term-missing
```

## ğŸ“š ç›®æ¬¡

1. [a00_responses_api.py ãƒ†ã‚¹ãƒˆã‚¬ã‚¤ãƒ‰](#a00_responses_apipy-ãƒ†ã‚¹ãƒˆã‚¬ã‚¤ãƒ‰)
2. [a01_structured_outputs_parse_schema.py ãƒ†ã‚¹ãƒˆã‚¬ã‚¤ãƒ‰](#a01_structured_outputs_parse_schemapy-ãƒ†ã‚¹ãƒˆã‚¬ã‚¤ãƒ‰)
3. [a02_responses_tools_pydantic_parse.py ãƒ†ã‚¹ãƒˆã‚¬ã‚¤ãƒ‰](#a02_responses_tools_pydantic_parsepy-ãƒ†ã‚¹ãƒˆã‚¬ã‚¤ãƒ‰)
4. [a03_images_and_vision.py ãƒ†ã‚¹ãƒˆã‚¬ã‚¤ãƒ‰](#a03_images_and_visionpy-ãƒ†ã‚¹ãƒˆã‚¬ã‚¤ãƒ‰)
5. [a04_audio_speeches.py ãƒ†ã‚¹ãƒˆã‚¬ã‚¤ãƒ‰](#a04_audio_speechespy-ãƒ†ã‚¹ãƒˆã‚¬ã‚¤ãƒ‰)
6. [a05_conversation_state.py ãƒ†ã‚¹ãƒˆã‚¬ã‚¤ãƒ‰](#a05_conversation_statepy-ãƒ†ã‚¹ãƒˆã‚¬ã‚¤ãƒ‰)
7. [a06_reasoning_chain_of_thought.py ãƒ†ã‚¹ãƒˆã‚¬ã‚¤ãƒ‰](#a06_reasoning_chain_of_thoughtpy-ãƒ†ã‚¹ãƒˆã‚¬ã‚¤ãƒ‰)

---

## a00_responses_api.py ãƒ†ã‚¹ãƒˆã‚¬ã‚¤ãƒ‰

### ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ¦‚è¦

åŸºæœ¬çš„ãªAnthropic Messages APIã®ä½¿ç”¨ä¾‹ã‚’å®Ÿè£…ã—ãŸãƒ‡ãƒ¢ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

### ãƒ†ã‚¹ãƒˆæ§‹æˆ

- **ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«**: `tests/unit/test_a00_responses_api.py`
- **ãƒ†ã‚¹ãƒˆæ•°**: 24
- **ã‚«ãƒãƒ¬ãƒ¼ã‚¸**: 28%
- **æˆåŠŸç‡**: 58% (14/24)

### ãƒ†ã‚¹ãƒˆã‚¯ãƒ©ã‚¹ä¸€è¦§


| ã‚¯ãƒ©ã‚¹å                 | ãƒ†ã‚¹ãƒˆå†…å®¹                 | ãƒ†ã‚¹ãƒˆæ•° | çŠ¶æ…‹ |
| ------------------------ | -------------------------- | -------- | ---- |
| TestPageConfig           | ãƒšãƒ¼ã‚¸è¨­å®šã®ãƒ†ã‚¹ãƒˆ         | 2        | 1/2  |
| TestCommonUI             | å…±é€šUIé–¢æ•°ã®ãƒ†ã‚¹ãƒˆ         | 2        | âœ…   |
| TestBaseDemo             | åŸºåº•ã‚¯ãƒ©ã‚¹ã®ãƒ†ã‚¹ãƒˆ         | 3        | 2/3  |
| TestTextResponseDemo     | ãƒ†ã‚­ã‚¹ãƒˆå¿œç­”ãƒ‡ãƒ¢ã®ãƒ†ã‚¹ãƒˆ   | 2        | âŒ   |
| TestMemoryResponseDemo   | ãƒ¡ãƒ¢ãƒªå¿œç­”ãƒ‡ãƒ¢ã®ãƒ†ã‚¹ãƒˆ     | 2        | 1/2  |
| TestImageResponseDemo    | ç”»åƒå¿œç­”ãƒ‡ãƒ¢ã®ãƒ†ã‚¹ãƒˆ       | 2        | 1/2  |
| TestStructuredOutputDemo | æ§‹é€ åŒ–å‡ºåŠ›ãƒ‡ãƒ¢ã®ãƒ†ã‚¹ãƒˆ     | 2        | 1/2  |
| TestWeatherDemo          | å¤©æ°—APIãƒ‡ãƒ¢ã®ãƒ†ã‚¹ãƒˆ        | 3        | 1/3  |
| TestDemoManager          | ãƒ‡ãƒ¢ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã®ãƒ†ã‚¹ãƒˆ   | 3        | âœ…   |
| TestMainApp              | ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã®ãƒ†ã‚¹ãƒˆ       | 1        | âœ…   |
| TestErrorHandling        | ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®ãƒ†ã‚¹ãƒˆ | 1        | âœ…   |
| TestIntegration          | çµ±åˆãƒ†ã‚¹ãƒˆ                 | 1        | âŒ   |

### å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰

```bash
# åŸºæœ¬å®Ÿè¡Œ
python -m pytest tests/unit/test_a00_responses_api.py -v

# ã‚«ãƒãƒ¬ãƒ¼ã‚¸ä»˜ã
python -m pytest tests/unit/test_a00_responses_api.py \
  --cov=a00_responses_api \
  --cov-report=term-missing

# ç‰¹å®šã®ã‚¯ãƒ©ã‚¹ã®ã¿
python -m pytest tests/unit/test_a00_responses_api.py::TestTextResponseDemo -v

# ç‰¹å®šã®ãƒ†ã‚¹ãƒˆã®ã¿
python -m pytest tests/unit/test_a00_responses_api.py::TestBaseDemo::test_base_demo_initialization -v
```

### ä¸»è¦ãªãƒ¢ãƒƒã‚¯å¯¾è±¡

- Streamlitã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆst.button, st.text_area, st.writeç­‰ï¼‰
- Anthropic APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼ˆmessages.createï¼‰
- å¤–éƒ¨APIï¼ˆOpenWeatherMap, ExchangeRateï¼‰
- ãƒ˜ãƒ«ãƒ‘ãƒ¼ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆhelper_api, helper_stï¼‰

### ãƒ†ã‚¹ãƒˆã®ãƒã‚¤ãƒ³ãƒˆ

1. **APIå‘¼ã³å‡ºã—ã®æ¤œè¨¼**: create_messageãŒæ­£ã—ã„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§å‘¼ã°ã‚Œã¦ã„ã‚‹ã‹
2. **UIè¡¨ç¤ºã®æ¤œè¨¼**: Streamlitã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒé©åˆ‡ã«å‘¼ã°ã‚Œã¦ã„ã‚‹ã‹
3. **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: APIä¾‹å¤–æ™‚ã®å‡¦ç†ãŒé©åˆ‡ã‹
4. **ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†**: Streamlitã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹ãŒæ­£ã—ãç®¡ç†ã•ã‚Œã¦ã„ã‚‹ã‹

### æ—¢çŸ¥ã®å•é¡Œã¨æ”¹å–„ç‚¹

- ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ï¼ˆ@error_handler_ui, @timer_uiï¼‰ã®ãƒ¢ãƒƒã‚¯ãŒä¸å®Œå…¨
- ä¸€éƒ¨ã®ãƒ‡ãƒ¢ã‚¯ãƒ©ã‚¹ã®run()ãƒ¡ã‚½ãƒƒãƒ‰ã®è¤‡é›‘ãªãƒ­ã‚¸ãƒƒã‚¯ã®ãƒ†ã‚¹ãƒˆãŒå›°é›£
- ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹ã®performance_metricsã¸ã®ä¾å­˜

---

## a01_structured_outputs_parse_schema.py ãƒ†ã‚¹ãƒˆã‚¬ã‚¤ãƒ‰

### ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ¦‚è¦

æ§‹é€ åŒ–å‡ºåŠ›ã¨ã‚¹ã‚­ãƒ¼ãƒæ¤œè¨¼ã‚’ä½¿ç”¨ã—ãŸãƒ‡ãƒ¢ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆAnthropic APIç‰ˆï¼‰

### ãƒ†ã‚¹ãƒˆæ§‹æˆ

- **ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«**: `tests/unit/test_a01_structured_outputs_parse_schema.py`
- **ãƒ†ã‚¹ãƒˆæ•°**: 19
- **ã‚«ãƒãƒ¬ãƒ¼ã‚¸**: ç›®æ¨™50%ä»¥ä¸Š
- **çŠ¶æ…‹**: âœ… å®Ÿè£…æ¸ˆã¿

### ãƒ†ã‚¹ãƒˆã‚¯ãƒ©ã‚¹ä¸€è¦§


| ã‚¯ãƒ©ã‚¹å                 | ãƒ†ã‚¹ãƒˆå†…å®¹             | ãƒ†ã‚¹ãƒˆæ•° | çŠ¶æ…‹ |
| ------------------------ | ---------------------- | -------- | ---- |
| TestPageConfig           | ãƒšãƒ¼ã‚¸è¨­å®šã®ãƒ†ã‚¹ãƒˆ     | 2        | âœ…   |
| TestPydanticModels       | Pydanticãƒ¢ãƒ‡ãƒ«ã®ãƒ†ã‚¹ãƒˆ | 3        | âœ…   |
| TestStructuredOutputDemo | æ§‹é€ åŒ–å‡ºåŠ›ãƒ‡ãƒ¢ã®ãƒ†ã‚¹ãƒˆ | 4        | âœ…   |
| TestDemoScenarios        | ãƒ‡ãƒ¢ã‚·ãƒŠãƒªã‚ªã®ãƒ†ã‚¹ãƒˆ   | 3        | âœ…   |
| TestMainApp              | ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã®ãƒ†ã‚¹ãƒˆ   | 2        | âœ…   |
| TestIntegration          | çµ±åˆãƒ†ã‚¹ãƒˆ             | 1        | âœ…   |

### Pydanticãƒ¢ãƒ‡ãƒ«ä¸€è¦§

- ArticleAnalysisï¼ˆè¨˜äº‹åˆ†æï¼‰
- Productï¼ˆè£½å“æƒ…å ±ï¼‰
- ProductCatalogï¼ˆè£½å“ã‚«ã‚¿ãƒ­ã‚°ï¼‰
- Addressï¼ˆä½æ‰€ï¼‰
- UserInfoï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ï¼‰

### å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰

```bash
# åŸºæœ¬å®Ÿè¡Œ
python -m pytest tests/unit/test_a01_structured_outputs_parse_schema.py -v

# ã‚«ãƒãƒ¬ãƒ¼ã‚¸ä»˜ã
python -m pytest tests/unit/test_a01_structured_outputs_parse_schema.py \
  --cov=a01_structured_outputs_parse_schema \
  --cov-report=term-missing

# Pydanticãƒ¢ãƒ‡ãƒ«é–¢é€£ã®ãƒ†ã‚¹ãƒˆã®ã¿
python -m pytest tests/unit/test_a01_structured_outputs_parse_schema.py -k "pydantic" -v

# ã‚¹ã‚­ãƒ¼ãƒæ¤œè¨¼ãƒ†ã‚¹ãƒˆã®ã¿
python -m pytest tests/unit/test_a01_structured_outputs_parse_schema.py -k "schema" -v
```

### Pydanticãƒ¢ãƒ‡ãƒ«ä¸€è¦§

- EventInfoï¼ˆã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±ï¼‰
- MathReasoningï¼ˆæ•°å­¦çš„æ¨è«–ï¼‰
- DynamicUIï¼ˆå‹•çš„UIå®šç¾©ï¼‰
- EntityInfoï¼ˆã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£æƒ…å ±ï¼‰
- ConditionalOutputï¼ˆæ¡ä»¶ä»˜ãå‡ºåŠ›ï¼‰
- ModerationResultï¼ˆãƒ¢ãƒ‡ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³çµæœï¼‰

### ãƒ†ã‚¹ãƒˆã®ãƒã‚¤ãƒ³ãƒˆ

1. **Pydanticãƒ¢ãƒ‡ãƒ«ã®æ¤œè¨¼**: ã‚¹ã‚­ãƒ¼ãƒã«å¾“ã£ãŸæ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ã®ç”Ÿæˆ
2. **JSONè§£æ**: æ§‹é€ åŒ–ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®JSONè§£æ
3. **ã‚¹ã‚­ãƒ¼ãƒé©åˆæ€§**: å‡ºåŠ›ãŒã‚¹ã‚­ãƒ¼ãƒã«é©åˆã—ã¦ã„ã‚‹ã‹

---

## a02_responses_tools_pydantic_parse.py ãƒ†ã‚¹ãƒˆã‚¬ã‚¤ãƒ‰

### ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ¦‚è¦

Pydanticãƒ„ãƒ¼ãƒ«ã¨é–¢æ•°å‘¼ã³å‡ºã—ï¼ˆTool Useï¼‰ã‚’ä½¿ç”¨ã—ãŸãƒ‡ãƒ¢ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

### ãƒ†ã‚¹ãƒˆæ§‹æˆ

- **ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«**: `tests/unit/test_a02_responses_tools_pydantic_parse.py`
- **ãƒ†ã‚¹ãƒˆæ•°**: 18
- **ã‚«ãƒãƒ¬ãƒ¼ã‚¸**: ç›®æ¨™45%ä»¥ä¸Š
- **çŠ¶æ…‹**: âœ… å®Ÿè£…æ¸ˆã¿

### ãƒ†ã‚¹ãƒˆã‚¯ãƒ©ã‚¹ä¸€è¦§


| ã‚¯ãƒ©ã‚¹å            | ãƒ†ã‚¹ãƒˆå†…å®¹                 | ãƒ†ã‚¹ãƒˆæ•° | çŠ¶æ…‹ |
| ------------------- | -------------------------- | -------- | ---- |
| TestPageConfig      | ãƒšãƒ¼ã‚¸è¨­å®šã®ãƒ†ã‚¹ãƒˆ         | 1        | âœ…   |
| TestToolDefinitions | ãƒ„ãƒ¼ãƒ«å®šç¾©ã®ãƒ†ã‚¹ãƒˆ         | 3        | âœ…   |
| TestPydanticModels  | Pydanticãƒ¢ãƒ‡ãƒ«ã®ãƒ†ã‚¹ãƒˆ     | 3        | âœ…   |
| TestToolHandlers    | ãƒ„ãƒ¼ãƒ«ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã®ãƒ†ã‚¹ãƒˆ   | 3        | âœ…   |
| TestToolsDemo       | ToolsDemoã‚¯ãƒ©ã‚¹ã®ãƒ†ã‚¹ãƒˆ    | 2        | âœ…   |
| TestDemoScenarios   | ãƒ‡ãƒ¢ã‚·ãƒŠãƒªã‚ªã®ãƒ†ã‚¹ãƒˆ       | 4        | âœ…   |
| TestErrorHandling   | ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®ãƒ†ã‚¹ãƒˆ | 2        | âœ…   |
| TestMainApp         | ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã®ãƒ†ã‚¹ãƒˆ       | 2        | âœ…   |
| TestIntegration     | çµ±åˆãƒ†ã‚¹ãƒˆ                 | 1        | âœ…   |

### ãƒ„ãƒ¼ãƒ«å®šç¾©ä¸€è¦§

- weather_toolï¼ˆå¤©æ°—æƒ…å ±å–å¾—ï¼‰
- calculator_toolï¼ˆè¨ˆç®—æ©Ÿï¼‰
- search_toolï¼ˆæ¤œç´¢ï¼‰

### Pydanticãƒ¢ãƒ‡ãƒ«ä¸€è¦§

- WeatherResponseï¼ˆå¤©æ°—ãƒ¬ã‚¹ãƒãƒ³ã‚¹ï¼‰
- CalculationResultï¼ˆè¨ˆç®—çµæœï¼‰
- SearchResultï¼ˆæ¤œç´¢çµæœï¼‰
- SearchResultsï¼ˆæ¤œç´¢çµæœãƒªã‚¹ãƒˆï¼‰

### ãƒ†ã‚¹ãƒˆã®ãƒã‚¤ãƒ³ãƒˆ

1. **Toolå®šç¾©ã®æ¤œè¨¼**: Pydanticãƒ¢ãƒ‡ãƒ«ã‹ã‚‰ãƒ„ãƒ¼ãƒ«å®šç¾©ç”Ÿæˆ
2. **é–¢æ•°å‘¼ã³å‡ºã—ã®æ¤œè¨¼**: ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œã¨ãƒ¬ã‚¹ãƒãƒ³ã‚¹å‡¦ç†
3. **ãƒã‚¹ãƒˆæ§‹é€ ã®å‡¦ç†**: è¤‡é›‘ãªãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®æ¤œè¨¼

---

## a03_images_and_vision.py ãƒ†ã‚¹ãƒˆã‚¬ã‚¤ãƒ‰

### ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ¦‚è¦

ç”»åƒå‡¦ç†ã¨Visionæ©Ÿèƒ½ã‚’ä½¿ç”¨ã—ãŸãƒ‡ãƒ¢ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆAnthropic Claude Visionï¼‰

### ãƒ†ã‚¹ãƒˆæ§‹æˆ

- **ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«**: `tests/unit/test_a03_images_and_vision.py`
- **ãƒ†ã‚¹ãƒˆæ•°**: 17
- **ã‚«ãƒãƒ¬ãƒ¼ã‚¸**: ç›®æ¨™60%ä»¥ä¸Š
- **çŠ¶æ…‹**: âœ… å®Ÿè£…æ¸ˆã¿

### ãƒ†ã‚¹ãƒˆã‚¯ãƒ©ã‚¹ä¸€è¦§


| ã‚¯ãƒ©ã‚¹å            | ãƒ†ã‚¹ãƒˆå†…å®¹                     | ãƒ†ã‚¹ãƒˆæ•° | çŠ¶æ…‹ |
| ------------------- | ------------------------------ | -------- | ---- |
| TestPageConfig      | ãƒšãƒ¼ã‚¸è¨­å®šã®ãƒ†ã‚¹ãƒˆ             | 1        | âœ…   |
| TestImageUtilities  | ç”»åƒå‡¦ç†ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã®ãƒ†ã‚¹ãƒˆ | 3        | âœ…   |
| TestImageVisionDemo | ImageVisionDemoã‚¯ãƒ©ã‚¹ã®ãƒ†ã‚¹ãƒˆ  | 2        | âœ…   |
| TestDemoScenarios   | ãƒ‡ãƒ¢ã‚·ãƒŠãƒªã‚ªã®ãƒ†ã‚¹ãƒˆ           | 4        | âœ…   |
| TestErrorHandling   | ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®ãƒ†ã‚¹ãƒˆ     | 3        | âœ…   |
| TestMainApp         | ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã®ãƒ†ã‚¹ãƒˆ           | 2        | âœ…   |
| TestIntegration     | çµ±åˆãƒ†ã‚¹ãƒˆ                     | 1        | âœ…   |

### APIä½¿ç”¨ä¸€è¦§

- **Vision API**: ç”»åƒã‹ã‚‰ãƒ†ã‚­ã‚¹ãƒˆç”Ÿæˆï¼ˆmessages.create with image contentï¼‰
- **ç”»åƒå…¥åŠ›å½¢å¼**: URLã€Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã€ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«
- **è¤‡æ•°ç”»åƒå‡¦ç†**: è¤‡æ•°ç”»åƒã®åŒæ™‚åˆ†æ

### ãƒ†ã‚¹ãƒˆã®ãƒã‚¤ãƒ³ãƒˆ

1. **Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰**: ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã®Base64å¤‰æ›å‡¦ç†
2. **ç”»åƒURLå‡¦ç†**: URLç”»åƒã®å–å¾—ã¨å‡¦ç†
3. **ãƒãƒ«ãƒãƒ¢ãƒ¼ãƒ€ãƒ«å…¥åŠ›**: ãƒ†ã‚­ã‚¹ãƒˆã¨ç”»åƒã®çµ„ã¿åˆã‚ã›

---

## a04_audio_speeches.py ãƒ†ã‚¹ãƒˆã‚¬ã‚¤ãƒ‰

### ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ¦‚è¦

éŸ³å£°å‡¦ç†æ©Ÿèƒ½ã®ãƒ‡ãƒ¢ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆå°†æ¥çš„ãªéŸ³å£°æ©Ÿèƒ½å¯¾å¿œæº–å‚™ï¼‰

### ãƒ†ã‚¹ãƒˆæ§‹æˆ

- **ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«**: `tests/unit/test_a04_audio_speeches.py`
- **ãƒ†ã‚¹ãƒˆæ•°**: 17
- **ã‚«ãƒãƒ¬ãƒ¼ã‚¸**: ç›®æ¨™40%ä»¥ä¸Š
- **çŠ¶æ…‹**: âœ… å®Ÿè£…æ¸ˆã¿

### ãƒ†ã‚¹ãƒˆã‚¯ãƒ©ã‚¹ä¸€è¦§


| ã‚¯ãƒ©ã‚¹å              | ãƒ†ã‚¹ãƒˆå†…å®¹                      | ãƒ†ã‚¹ãƒˆæ•° | çŠ¶æ…‹ |
| --------------------- | ------------------------------- | -------- | ---- |
| TestPageConfig        | ãƒšãƒ¼ã‚¸è¨­å®šã®ãƒ†ã‚¹ãƒˆ              | 1        | âœ…   |
| TestAudioUtilities    | éŸ³å£°å‡¦ç†ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã®ãƒ†ã‚¹ãƒˆ  | 3        | âœ…   |
| TestAudioSpeechesDemo | AudioSpeechesDemoã‚¯ãƒ©ã‚¹ã®ãƒ†ã‚¹ãƒˆ | 2        | âœ…   |
| TestDemoScenarios     | ãƒ‡ãƒ¢ã‚·ãƒŠãƒªã‚ªã®ãƒ†ã‚¹ãƒˆ            | 4        | âœ…   |
| TestErrorHandling     | ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®ãƒ†ã‚¹ãƒˆ      | 3        | âœ…   |
| TestMainApp           | ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã®ãƒ†ã‚¹ãƒˆ            | 2        | âœ…   |
| TestIntegration       | çµ±åˆãƒ†ã‚¹ãƒˆ                      | 1        | âœ…   |

### æ©Ÿèƒ½ä¸€è¦§

- **éŸ³å£°å…¥åŠ›å‡¦ç†**: éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã®å‡¦ç†æº–å‚™
- **ãƒ†ã‚­ã‚¹ãƒˆå¤‰æ›**: éŸ³å£°ã‹ã‚‰ãƒ†ã‚­ã‚¹ãƒˆã¸ã®å¤‰æ›æº–å‚™
- **ãƒ¡ãƒ‡ã‚£ã‚¢å‡¦ç†**: éŸ³å£°ãƒ‡ãƒ¼ã‚¿ã®ç®¡ç†

### ãƒ†ã‚¹ãƒˆã®ãƒã‚¤ãƒ³ãƒˆ

1. **ãƒ•ã‚¡ã‚¤ãƒ«å‡¦ç†**: éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã¨æ¤œè¨¼
2. **ãƒ‡ãƒ¼ã‚¿å¤‰æ›**: éŸ³å£°ãƒ‡ãƒ¼ã‚¿ã®å½¢å¼å¤‰æ›
3. **UIçµ±åˆ**: Streamlitã§ã®ãƒ¡ãƒ‡ã‚£ã‚¢è¡¨ç¤º

---

## a05_conversation_state.py ãƒ†ã‚¹ãƒˆã‚¬ã‚¤ãƒ‰

### ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ¦‚è¦

ä¼šè©±çŠ¶æ…‹ç®¡ç†ã¨ç¶™ç¶šçš„ãªä¼šè©±ã‚’å®Ÿè£…ã—ãŸãƒ‡ãƒ¢ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

### ãƒ†ã‚¹ãƒˆæ§‹æˆ

- **ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«**: `tests/unit/test_a05_conversation_state.py`
- **ãƒ†ã‚¹ãƒˆæ•°**: 18
- **ã‚«ãƒãƒ¬ãƒ¼ã‚¸**: ç›®æ¨™50%ä»¥ä¸Š
- **çŠ¶æ…‹**: âœ… å®Ÿè£…æ¸ˆã¿

### ãƒ†ã‚¹ãƒˆã‚¯ãƒ©ã‚¹ä¸€è¦§


| ã‚¯ãƒ©ã‚¹å                  | ãƒ†ã‚¹ãƒˆå†…å®¹                          | ãƒ†ã‚¹ãƒˆæ•° | çŠ¶æ…‹ |
| ------------------------- | ----------------------------------- | -------- | ---- |
| TestPageConfig            | ãƒšãƒ¼ã‚¸è¨­å®šã®ãƒ†ã‚¹ãƒˆ                  | 1        | âœ…   |
| TestConversationUtilities | ä¼šè©±çŠ¶æ…‹ç®¡ç†ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã®ãƒ†ã‚¹ãƒˆ  | 3        | âœ…   |
| TestConversationStateDemo | ConversationStateDemoã‚¯ãƒ©ã‚¹ã®ãƒ†ã‚¹ãƒˆ | 2        | âœ…   |
| TestDemoScenarios         | ãƒ‡ãƒ¢ã‚·ãƒŠãƒªã‚ªã®ãƒ†ã‚¹ãƒˆ                | 4        | âœ…   |
| TestStateManagement       | çŠ¶æ…‹ç®¡ç†æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆ                | 2        | âœ…   |
| TestErrorHandling         | ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®ãƒ†ã‚¹ãƒˆ          | 2        | âœ…   |
| TestMainApp               | ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã®ãƒ†ã‚¹ãƒˆ                | 2        | âœ…   |
| TestIntegration           | çµ±åˆãƒ†ã‚¹ãƒˆ                          | 1        | âœ…   |

### ä¸»è¦æ©Ÿèƒ½

- **ä¼šè©±å±¥æ­´ç®¡ç†**: è¤‡æ•°ã‚¿ãƒ¼ãƒ³ã®ä¼šè©±ä¿æŒ
- **ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆç®¡ç†**: ä¼šè©±ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®ç¶­æŒ
- **çŠ¶æ…‹æ°¸ç¶šåŒ–**: ã‚»ãƒƒã‚·ãƒ§ãƒ³é–“ã§ã®çŠ¶æ…‹ä¿å­˜

### ãƒ†ã‚¹ãƒˆã®ãƒã‚¤ãƒ³ãƒˆ

1. **ä¼šè©±ç¶™ç¶šæ€§**: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å±¥æ­´ãŒæ­£ã—ãç¶­æŒã•ã‚Œã¦ã„ã‚‹ã‹
2. **çŠ¶æ…‹ç®¡ç†**: Streamlitã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹ã®ç¢ºèª
3. **ãƒ¡ãƒ¢ãƒªç®¡ç†**: é•·ã„ä¼šè©±ã§ã®ãƒ¡ãƒ¢ãƒªåŠ¹ç‡

---

## a06_reasoning_chain_of_thought.py ãƒ†ã‚¹ãƒˆã‚¬ã‚¤ãƒ‰

### ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ¦‚è¦

Chain of Thoughtï¼ˆCoTï¼‰æ¨è«–ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å®Ÿè£…ã—ãŸãƒ‡ãƒ¢ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

### ãƒ†ã‚¹ãƒˆæ§‹æˆ

- **ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«**: `tests/unit/test_a06_reasoning_chain_of_thought.py`
- **ãƒ†ã‚¹ãƒˆæ•°**: 16
- **ã‚«ãƒãƒ¬ãƒ¼ã‚¸**: ç›®æ¨™85%ä»¥ä¸Š
- **çŠ¶æ…‹**: âœ… å®Ÿè£…æ¸ˆã¿

### ãƒ†ã‚¹ãƒˆã‚¯ãƒ©ã‚¹ä¸€è¦§


| ã‚¯ãƒ©ã‚¹å                    | ãƒ†ã‚¹ãƒˆå†…å®¹                       | ãƒ†ã‚¹ãƒˆæ•° | çŠ¶æ…‹ |
| --------------------------- | -------------------------------- | -------- | ---- |
| TestPageConfig              | ãƒšãƒ¼ã‚¸è¨­å®šã®ãƒ†ã‚¹ãƒˆ               | 1        | âœ…   |
| TestChainOfThoughtUtilities | CoTå‡¦ç†ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã®ãƒ†ã‚¹ãƒˆ    | 3        | âœ…   |
| TestChainOfThoughtDemo      | ChainOfThoughtDemoã‚¯ãƒ©ã‚¹ã®ãƒ†ã‚¹ãƒˆ | 2        | âœ…   |
| TestDemoScenarios           | ãƒ‡ãƒ¢ã‚·ãƒŠãƒªã‚ªã®ãƒ†ã‚¹ãƒˆ             | 4        | âœ…   |
| TestErrorHandling           | ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®ãƒ†ã‚¹ãƒˆ       | 2        | âœ…   |
| TestMainApp                 | ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã®ãƒ†ã‚¹ãƒˆ             | 2        | âœ…   |
| TestIntegration             | çµ±åˆãƒ†ã‚¹ãƒˆ                       | 1        | âœ…   |

### æ¨è«–ãƒ‘ã‚¿ãƒ¼ãƒ³ä¸€è¦§

1. **Step-by-Step Reasoning**: æ®µéšçš„æ¨è«–
2. **Hypothesis-Test**: ä»®èª¬æ¤œè¨¼æ¨è«–
3. **Tree of Thought**: æ€è€ƒã®æœ¨ï¼ˆåˆ†å²æ¢ç´¢ï¼‰
4. **Pros-Cons-Decision**: è³›å¦æ¯”è¼ƒæ±ºå®š
5. **Plan-Execute-Reflect**: è¨ˆç”»å®Ÿè¡ŒæŒ¯ã‚Šè¿”ã‚Š

### ãƒ†ã‚¹ãƒˆã®ãƒã‚¤ãƒ³ãƒˆ

1. **ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ¤œè¨¼**: å„æ¨è«–ãƒ‘ã‚¿ãƒ¼ãƒ³ã®æŒ‡ç¤ºå†…å®¹ç¢ºèª
2. **æ§‹é€ åŒ–å‡ºåŠ›**: ã‚»ã‚¯ã‚·ãƒ§ãƒ³åˆ†ã‘ã•ã‚ŒãŸå‡ºåŠ›å½¢å¼
3. **æ¨è«–ã®å“è³ª**: è«–ç†çš„ãªæ¨è«–ãŒè¡Œã‚ã‚Œã¦ã„ã‚‹ã‹

---

## å…±é€šãƒ†ã‚¹ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³

### Streamlitã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ¢ãƒƒã‚¯

```python
@patch('streamlit.button')
@patch('streamlit.text_area')
def test_ui_components(mock_text_area, mock_button):
    mock_text_area.return_value = "Test input"
    mock_button.return_value = True
    # ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
```

### Anthropic APIã®ãƒ¢ãƒƒã‚¯

```python
def test_api_call(demo_instance):
    mock_response = MagicMock()
    mock_response.id = "msg_test_id"
    demo_instance.client.create_message.return_value = mock_response
    # ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
```

### ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®ãƒ†ã‚¹ãƒˆ

```python
@patch('streamlit.error')
def test_error_handling(mock_error):
    demo.client.create_message.side_effect = Exception("API Error")
    # ã‚¨ãƒ©ãƒ¼å‡¦ç†ã®ãƒ†ã‚¹ãƒˆ
    mock_error.assert_called()
```

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

1. **ImportError**:

   - è§£æ±º: `export PYTHONPATH=$PYTHONPATH:$(pwd)`
2. **ãƒ¢ãƒƒã‚¯ã®ä¸å…·åˆ**:

   - è§£æ±º: `@patch`ã®é †åºã‚’ç¢ºèªï¼ˆä¸‹ã‹ã‚‰ä¸Šã¸é©ç”¨ï¼‰
3. **ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹ã‚¨ãƒ©ãƒ¼**:

   - è§£æ±º: `st.session_state`ã«å¿…è¦ãªã‚­ãƒ¼ã‚’äº‹å‰ã«è¨­å®š
4. **ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã®ãƒ¢ãƒƒã‚¯**:

   - è§£æ±º: ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã‚’å«ã‚€é–¢æ•°å…¨ä½“ã‚’ãƒ¢ãƒƒã‚¯
5. **ã‚«ãƒãƒ¬ãƒ¼ã‚¸ãŒä½ã„**:

   - è§£æ±º: `--cov-report=term-missing`ã§æœªã‚«ãƒãƒ¼è¡Œã‚’ç¢ºèª

## ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

1. **ãƒ¢ãƒƒã‚¯ã®éšå±¤åŒ–**: å¿…è¦æœ€å°é™ã®ãƒ¢ãƒƒã‚¯ã‹ã‚‰å§‹ã‚ã¦æ®µéšçš„ã«è¿½åŠ 
2. **ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ã®æ´»ç”¨**: å…±é€šã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚’ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£åŒ–
3. **ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã®æ˜ç¢ºåŒ–**: ä½•ã‚’ãƒ†ã‚¹ãƒˆã—ã¦ã„ã‚‹ã‹æ˜ç¢ºã«ã™ã‚‹
4. **ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ã®ã‚«ãƒãƒ¼**: æ­£å¸¸ç³»ã ã‘ã§ãªãç•°å¸¸ç³»ã‚‚ãƒ†ã‚¹ãƒˆ
5. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®å……å®Ÿ**: ãƒ†ã‚¹ãƒˆã®æ„å›³ã‚’æ˜ç¢ºã«è¨˜è¿°

## ã¾ã¨ã‚

å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ç‹¬è‡ªã®ç‰¹å¾´ã¨ãƒ†ã‚¹ãƒˆè¦ä»¶ã‚’æŒã£ã¦ã„ã¾ã™ï¼š

- **a00**: åŸºæœ¬çš„ãªAPIä½¿ç”¨ï¼ˆæœ€ã‚‚åŸºç¤çš„ï¼‰
- **a01**: æ§‹é€ åŒ–å‡ºåŠ›ã¨ã‚¹ã‚­ãƒ¼ãƒæ¤œè¨¼ï¼ˆJSONå‡¦ç†é‡è¦–ï¼‰ âœ… å®Ÿè£…æ¸ˆã¿
- **a02**: Tool Useï¼ˆé–¢æ•°å‘¼ã³å‡ºã—ï¼‰ âœ… å®Ÿè£…æ¸ˆã¿
- **a03**: ç”»åƒå‡¦ç†ï¼ˆãƒãƒ«ãƒãƒ¢ãƒ¼ãƒ€ãƒ«ï¼‰ âœ… å®Ÿè£…æ¸ˆã¿
- **a04**: éŸ³å£°å‡¦ç†æº–å‚™ï¼ˆå°†æ¥å¯¾å¿œï¼‰ âœ… å®Ÿè£…æ¸ˆã¿
- **a05**: ä¼šè©±ç®¡ç†ï¼ˆã‚¹ãƒ†ãƒ¼ãƒˆç®¡ç†ï¼‰ âœ… å®Ÿè£…æ¸ˆã¿
- **a06**: æ¨è«–ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆé«˜åº¦ãªæ¨è«–ï¼‰ âœ… å®Ÿè£…æ¸ˆã¿

å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒ†ã‚¹ãƒˆã¯ç‹¬ç«‹ã—ã¦å®Ÿè¡Œå¯èƒ½ã§ã€ç‰¹å®šã®æ©Ÿèƒ½ã«ç„¦ç‚¹ã‚’å½“ã¦ãŸãƒ†ã‚¹ãƒˆãŒå¯èƒ½ã§ã™ã€‚

---

æœ€çµ‚æ›´æ–°: 2025å¹´1æœˆ14æ—¥
