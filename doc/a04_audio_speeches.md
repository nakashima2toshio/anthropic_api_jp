# üìã a04_audio_speeches.py Ë®≠Ë®àÊõ∏

## üìù ÁõÆÊ¨°

1. [üìñ Ê¶ÇË¶ÅÊõ∏](#üìñ-Ê¶ÇË¶ÅÊõ∏)
2. [üîß „Ç∑„Çπ„ÉÜ„É†ÊßãÊàê](#üîß-„Ç∑„Çπ„ÉÜ„É†ÊßãÊàê)
3. [üìã Èñ¢Êï∞‰∏ÄË¶ß](#üìã-Èñ¢Êï∞‰∏ÄË¶ß)
4. [üìë Èñ¢Êï∞Ë©≥Á¥∞Ë®≠Ë®à](#üìë-Èñ¢Êï∞Ë©≥Á¥∞Ë®≠Ë®à)
5. [‚öôÔ∏è ÊäÄË°ì‰ªïÊßò](#‚öôÔ∏è-ÊäÄË°ì‰ªïÊßò)
6. [üö® „Ç®„É©„Éº„Éè„É≥„Éâ„É™„É≥„Ç∞](#üö®-„Ç®„É©„Éº„Éè„É≥„Éâ„É™„É≥„Ç∞)

---

## üìñ Ê¶ÇË¶ÅÊõ∏

### üéØ Âá¶ÁêÜ„ÅÆÊ¶ÇË¶Å

**Èü≥Â£∞„Éª„Çπ„Éî„Éº„ÉÅÂá¶ÁêÜÁµ±Âêà„Éá„É¢„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥**

Êú¨„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„ÅØ„ÄÅÈü≥Â£∞Âá¶ÁêÜÊ©üËÉΩÔºàTTS„ÄÅSTT„ÄÅÁøªË®≥„ÄÅ„É™„Ç¢„É´„Çø„Ç§„É†APIÔºâ„ÇíÂÆüË£Ö„Åó„ÅüStreamlit Web„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„Åß„Åô„ÄÇAnthropic API„ÅØÈü≥Â£∞Âá¶ÁêÜ„Çí„Éç„Ç§„ÉÜ„Ç£„Éñ„Çµ„Éù„Éº„Éà„Åó„Å¶„ÅÑ„Å™„ÅÑ„Åü„ÇÅ„ÄÅÂ§ñÈÉ®Èü≥Â£∞„Çµ„Éº„Éì„ÇπÔºàOpenAIÁ≠âÔºâ„Å®„ÅÆÁµ±Âêà„Éë„Çø„Éº„É≥„ÇíÁ§∫„Åô„Éó„É¨„Éº„Çπ„Éõ„É´„ÉÄ„ÉºÂÆüË£Ö„Å®„Åó„Å¶Ë®≠Ë®à„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ

#### üåü ‰∏ªË¶ÅÊ©üËÉΩ

| Ê©üËÉΩ | Ë™¨Êòé |
|------|------|
| üé§ **Text-to-Speech** | „ÉÜ„Ç≠„Çπ„Éà„Åã„ÇâÈü≥Â£∞ÁîüÊàêÔºàTTSÔºâ |
| üéß **Speech-to-Text** | Èü≥Â£∞„Åã„Çâ„ÉÜ„Ç≠„Çπ„ÉàÂ§âÊèõÔºàSTTÔºâ |
| üåê **Èü≥Â£∞ÁøªË®≥** | Èü≥Â£∞„ÅÆÂ§öË®ÄË™ûÁøªË®≥ |
| ‚ö° **„É™„Ç¢„É´„Çø„Ç§„É†API** | „Çπ„Éà„É™„Éº„Éü„É≥„Ç∞Èü≥Â£∞Âá¶ÁêÜ |
| ü§ñ **Èü≥Â£∞„Ç®„Éº„Ç∏„Çß„É≥„Éà** | Èü≥Â£∞‚Üí„ÉÅ„É£„ÉÉ„Éà‚ÜíÈü≥Â£∞„ÅÆ„Éë„Ç§„Éó„É©„Ç§„É≥ |

#### üé® Âá¶ÁêÜÂØæË±°„Éá„Éº„Çø

```mermaid
graph LR
    A["Audio/Text Input"] --> B{Processing Type}
    B -->|TTS| C["Text to Speech"]
    B -->|STT| D["Speech to Text"]
    B -->|Translation| E["Audio Translation"]
    B -->|Realtime| F["Stream Processing"]
    B -->|Agent| G["Voice Agent Chain"]
    
    C --> H["Audio Output"]
    D --> I["Text Output"]
    E --> J["Translated Audio"]
    F --> K["Stream Output"]
    G --> L["Conversational Response"]
```

### üîÑ main„ÅÆÂá¶ÁêÜ„ÅÆÊµÅ„Çå

```mermaid
flowchart TD
    Start(["App Start"]) --> Config["Page Config Setup"]
    Config --> Import["Import Validation"]
    Import --> ApiKey["API Key Check"]
    ApiKey --> Manager["AudioDemoManager Init"]
    
    Manager --> UI["Audio UI Setup"]
    UI --> DemoSelect["Demo Selection"]
    DemoSelect --> AudioModel["Audio Model Selection"]
    
    AudioModel --> InputType{"Input Type?"}
    InputType -->|Text| TextInput["Text Input"]
    InputType -->|Audio| AudioInput["Audio Upload"]
    
    TextInput --> Process["Process with Placeholder"]
    AudioInput --> Process
    
    Process --> Output["Generate Output"]
    Output --> Download["Provide Download"]
    Download --> DemoSelect
```

---

## üîß „Ç∑„Çπ„ÉÜ„É†ÊßãÊàê

### üì¶ ‰∏ªË¶Å„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà

```mermaid
classDiagram
    class BaseDemo {
        <<abstract>>
        +string demo_name
        +AnthropicClient anthropic_client
        +OpenAIClient openai_client
        +run()
        +safe_api_call()
        +error_handler_ui()
        +timer_ui()
    }

    class TextToSpeechDemo {
        +run()
        +generate_speech()
        +select_voice()
        +create_audio_file()
    }

    class SpeechToTextDemo {
        +run()
        +transcribe_audio()
        +process_audio_file()
        +display_transcript()
    }

    class SpeechTranslationDemo {
        +run()
        +translate_audio()
        +detect_language()
        +generate_translated_audio()
    }

    class RealtimeApiDemo {
        +run()
        +stream_audio()
        +process_chunks()
        +handle_websocket()
    }

    class ChainedVoiceAgentDemo {
        +run()
        +voice_to_text()
        +chat_response()
        +text_to_voice()
    }

    class AudioDemoManager {
        +dict demos
        +run_application()
        +setup_audio_ui()
        +select_audio_model()
    }

    class AudioHelper {
        <<utility>>
        +validate_audio_format()
        +convert_audio()
        +calculate_duration()
        +estimate_cost()
    }

    BaseDemo <|-- TextToSpeechDemo
    BaseDemo <|-- SpeechToTextDemo
    BaseDemo <|-- SpeechTranslationDemo
    BaseDemo <|-- RealtimeApiDemo
    BaseDemo <|-- ChainedVoiceAgentDemo
    
    TextToSpeechDemo --> AudioHelper
    SpeechToTextDemo --> AudioHelper
    SpeechTranslationDemo --> AudioHelper
    RealtimeApiDemo --> AudioHelper
    ChainedVoiceAgentDemo --> AudioHelper
    
    AudioDemoManager --> BaseDemo
```

### üìã „Éá„Éº„Çø„Éï„É≠„Éº

```mermaid
graph TD
    A["Input Selection"] --> B{Demo Type}
    
    B -->|TTS| C["Text Input"]
    C --> D["Voice Selection"]
    D --> E["TTS API Call"]
    E --> F["Audio Generation"]
    
    B -->|STT| G["Audio Upload"]
    G --> H["Format Validation"]
    H --> I["STT API Call"]
    I --> J["Transcription"]
    
    B -->|Translation| K["Audio + Target Lang"]
    K --> L["Translation API"]
    L --> M["Translated Audio"]
    
    B -->|Realtime| N["Stream Setup"]
    N --> O["WebSocket Connect"]
    O --> P["Chunk Processing"]
    
    B -->|Agent| Q["Voice Input"]
    Q --> R["STT Processing"]
    R --> S["Anthropic Chat"]
    S --> T["TTS Response"]
    
    F --> U["Download Button"]
    J --> U
    M --> U
    P --> U
    T --> U
```

---

## üìã Èñ¢Êï∞‰∏ÄË¶ß

### üèóÔ∏è „Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥Âà∂Âæ°Èñ¢Êï∞

| Èñ¢Êï∞Âêç | ÂàÜÈ°û | Âá¶ÁêÜÊ¶ÇË¶Å | ÈáçË¶ÅÂ∫¶ |
|--------|------|----------|---------|
| `main()` | üéØ Âà∂Âæ° | „Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„Ç®„É≥„Éà„É™„Éº„Éù„Ç§„É≥„Éà | ‚≠ê‚≠ê‚≠ê |
| `AudioDemoManager.__init__()` | üîß ÂàùÊúüÂåñ | Èü≥Â£∞„Éá„É¢„Éû„Éç„Éº„Ç∏„É£„ÉºÂàùÊúüÂåñ | ‚≠ê‚≠ê‚≠ê |
| `AudioDemoManager.run_application()` | üéØ Âà∂Âæ° | „Éá„É¢Áµ±ÂêàÁÆ°ÁêÜ„ÉªÂÆüË°åÂà∂Âæ° | ‚≠ê‚≠ê‚≠ê |
| `AudioDemoManager.setup_audio_ui()` | üé® UI | Èü≥Â£∞Âõ∫ÊúâUIË®≠ÂÆö | ‚≠ê‚≠ê‚≠ê |

### üè≠ Âü∫Â∫ï„ÇØ„É©„ÇπÈñ¢Êï∞

| Èñ¢Êï∞Âêç | ÂàÜÈ°û | Âá¶ÁêÜÊ¶ÇË¶Å | ÈáçË¶ÅÂ∫¶ |
|--------|------|----------|---------|
| `BaseDemo.__init__()` | üîß ÂàùÊúüÂåñ | „Éá„É¢Âü∫Áõ§„ÉªË§áÊï∞„ÇØ„É©„Ç§„Ç¢„É≥„ÉàÂàùÊúüÂåñ | ‚≠ê‚≠ê‚≠ê |
| `BaseDemo.safe_api_call()` | üîå API | „É™„Éà„É©„Ç§‰ªò„ÅçÂÆâÂÖ®„Å™APIÂëº„Å≥Âá∫„Åó | ‚≠ê‚≠ê‚≠ê |
| `BaseDemo.error_handler_ui()` | üõ°Ô∏è ‰øùË≠∑ | UIÁµ±Âêà„Ç®„É©„Éº„Éè„É≥„Éâ„É™„É≥„Ç∞ | ‚≠ê‚≠ê‚≠ê |
| `BaseDemo.timer_ui()` | üìä Ë®àÊ∏¨ | ÂÆüË°åÊôÇÈñìË®àÊ∏¨„Éá„Ç≥„É¨„Éº„Çø | ‚≠ê‚≠ê |

### üé§ Èü≥Â£∞Âá¶ÁêÜ„Éá„É¢Èñ¢Êï∞

#### TextToSpeechDemo
| Èñ¢Êï∞Âêç | ÂàÜÈ°û | Âá¶ÁêÜÊ¶ÇË¶Å | ÈáçË¶ÅÂ∫¶ |
|--------|------|----------|---------|
| `TextToSpeechDemo.run()` | üéØ ÂÆüË°å | TTS „Éá„É¢ÂÆüË°å | ‚≠ê‚≠ê‚≠ê |
| `TextToSpeechDemo.generate_speech()` | üîä ÁîüÊàê | Èü≥Â£∞„Éï„Ç°„Ç§„É´ÁîüÊàê | ‚≠ê‚≠ê‚≠ê |
| `TextToSpeechDemo.select_voice()` | üé® ÈÅ∏Êäû | Èü≥Â£∞„Çø„Ç§„ÉóÈÅ∏Êäû | ‚≠ê‚≠ê |

#### SpeechToTextDemo
| Èñ¢Êï∞Âêç | ÂàÜÈ°û | Âá¶ÁêÜÊ¶ÇË¶Å | ÈáçË¶ÅÂ∫¶ |
|--------|------|----------|---------|
| `SpeechToTextDemo.run()` | üéØ ÂÆüË°å | STT „Éá„É¢ÂÆüË°å | ‚≠ê‚≠ê‚≠ê |
| `SpeechToTextDemo.transcribe_audio()` | üìù Â§âÊèõ | Èü≥Â£∞„ÉÜ„Ç≠„Çπ„ÉàÂ§âÊèõ | ‚≠ê‚≠ê‚≠ê |
| `SpeechToTextDemo.process_audio_file()` | üîç Âá¶ÁêÜ | Èü≥Â£∞„Éï„Ç°„Ç§„É´ÂâçÂá¶ÁêÜ | ‚≠ê‚≠ê |

#### ChainedVoiceAgentDemo
| Èñ¢Êï∞Âêç | ÂàÜÈ°û | Âá¶ÁêÜÊ¶ÇË¶Å | ÈáçË¶ÅÂ∫¶ |
|--------|------|----------|---------|
| `ChainedVoiceAgentDemo.run()` | üéØ ÂÆüË°å | Èü≥Â£∞„Ç®„Éº„Ç∏„Çß„É≥„Éà„Éá„É¢ | ‚≠ê‚≠ê‚≠ê |
| `ChainedVoiceAgentDemo.voice_to_text()` | üé§ Â§âÊèõ | Èü≥Â£∞‚Üí„ÉÜ„Ç≠„Çπ„Éà | ‚≠ê‚≠ê‚≠ê |
| `ChainedVoiceAgentDemo.chat_response()` | üí¨ ÂØæË©± | Anthropic „ÉÅ„É£„ÉÉ„ÉàÂá¶ÁêÜ | ‚≠ê‚≠ê‚≠ê |
| `ChainedVoiceAgentDemo.text_to_voice()` | üîä Â§âÊèõ | „ÉÜ„Ç≠„Çπ„Éà‚ÜíÈü≥Â£∞ | ‚≠ê‚≠ê‚≠ê |

### üîß „Éò„É´„Éë„ÉºÈñ¢Êï∞

| Èñ¢Êï∞Âêç | ÂàÜÈ°û | Âá¶ÁêÜÊ¶ÇË¶Å | ÈáçË¶ÅÂ∫¶ |
|--------|------|----------|---------|
| `AudioHelper.validate_audio_format()` | ‚úÖ Ê§úË®º | Èü≥Â£∞ÂΩ¢ÂºèÊ§úË®º | ‚≠ê‚≠ê |
| `AudioHelper.convert_audio()` | üîÑ Â§âÊèõ | Èü≥Â£∞ÂΩ¢ÂºèÂ§âÊèõ | ‚≠ê‚≠ê |
| `AudioHelper.calculate_duration()` | üìä Ë®àÁÆó | Èü≥Â£∞Èï∑„ÅïË®àÁÆó | ‚≠ê |
| `AudioHelper.estimate_cost()` | üí∞ Êé®ÂÆö | „Ç≥„Çπ„ÉàÊé®ÂÆö | ‚≠ê‚≠ê |

---

## üìë Èñ¢Êï∞Ë©≥Á¥∞Ë®≠Ë®à

### üé§ TextToSpeechDemo.run()

#### üéØ Âá¶ÁêÜÊ¶ÇË¶Å
„ÉÜ„Ç≠„Çπ„Éà„Åã„ÇâÈü≥Â£∞„Éï„Ç°„Ç§„É´„ÇíÁîüÊàê„Åô„Çã„Éá„É¢ÂÆüË£Ö

#### üìä Âá¶ÁêÜ„ÅÆÊµÅ„Çå
```mermaid
graph TD
    A["Demo Start"] --> B["Display TTS Interface"]
    B --> C["Text Input Area"]
    C --> D["Voice Selection"]
    D --> E["Model Selection"]
    E --> F{"Generate Button?"}
    F -->|No| G["Wait"]
    F -->|Yes| H["Validate Input"]
    H --> I["Call TTS API"]
    I --> J["Generate Audio"]
    J --> K["Display Player"]
    K --> L["Download Button"]
    L --> G
```

#### üìã IPOË®≠Ë®à

| È†ÖÁõÆ | ÂÜÖÂÆπ |
|------|------|
| **INPUT** | „ÉÜ„Ç≠„Çπ„Éà„ÄÅÈü≥Â£∞„Çø„Ç§„Éó„ÄÅ„É¢„Éá„É´ÈÅ∏Êäû„ÄÅÈÄüÂ∫¶Ë®≠ÂÆö |
| **PROCESS** | ÂÖ•ÂäõÊ§úË®º ‚Üí TTS APIÂëº„Å≥Âá∫„Åó ‚Üí Èü≥Â£∞ÁîüÊàê ‚Üí „Éï„Ç°„Ç§„É´‰ΩúÊàê |
| **OUTPUT** | Èü≥Â£∞„Éï„Ç°„Ç§„É´ÔºàMP3/WAVÔºâ„ÄÅÂÜçÁîü„Éó„É¨„Éº„É§„Éº„ÄÅ„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ„É™„É≥„ÇØ |

---

### üéß SpeechToTextDemo.run()

#### üéØ Âá¶ÁêÜÊ¶ÇË¶Å
Èü≥Â£∞„Éï„Ç°„Ç§„É´„Çí„ÉÜ„Ç≠„Çπ„Éà„Å´Â§âÊèõ„Åô„Çã„Éá„É¢ÂÆüË£Ö

#### üìä Âá¶ÁêÜ„ÅÆÊµÅ„Çå
```mermaid
graph TD
    A["Demo Start"] --> B["Display STT Interface"]
    B --> C["Audio File Upload"]
    C --> D{"File Uploaded?"}
    D -->|No| E["Wait"]
    D -->|Yes| F["Validate Format"]
    F --> G{"Valid?"}
    G -->|No| H["Show Error"]
    G -->|Yes| I["Display Audio Player"]
    I --> J["Transcribe Button"]
    J --> K["Call STT API"]
    K --> L["Process Response"]
    L --> M["Display Transcript"]
    M --> N["Copy Button"]
    H --> E
    N --> E
```

#### üìã IPOË®≠Ë®à

| È†ÖÁõÆ | ÂÜÖÂÆπ |
|------|------|
| **INPUT** | Èü≥Â£∞„Éï„Ç°„Ç§„É´ÔºàMP3/WAV/M4AÔºâ„ÄÅË®ÄË™ûË®≠ÂÆö |
| **PROCESS** | „Éï„Ç°„Ç§„É´Ê§úË®º ‚Üí STT APIÂëº„Å≥Âá∫„Åó ‚Üí „ÉÜ„Ç≠„Çπ„ÉàÊäΩÂá∫ |
| **OUTPUT** | Ëª¢ÂÜô„ÉÜ„Ç≠„Çπ„Éà„ÄÅ‰ø°È†ºÂ∫¶„Çπ„Ç≥„Ç¢„ÄÅ„Çø„Ç§„É†„Çπ„Çø„É≥„Éó |

---

### ü§ñ ChainedVoiceAgentDemo.run()

#### üéØ Âá¶ÁêÜÊ¶ÇË¶Å
Èü≥Â£∞ÂÖ•Âäõ‚Üí„ÉÅ„É£„ÉÉ„ÉàÂá¶ÁêÜ‚ÜíÈü≥Â£∞Âá∫Âäõ„ÅÆÈÄ£ÈéñÂá¶ÁêÜ

#### üìä Âá¶ÁêÜ„ÅÆÊµÅ„Çå
```mermaid
graph TD
    A["Demo Start"] --> B["Voice Input"]
    B --> C["STT Processing"]
    C --> D["Extract Text"]
    D --> E["Anthropic Chat API"]
    E --> F["Get Response"]
    F --> G["TTS Processing"]
    G --> H["Generate Voice"]
    H --> I["Play Response"]
    I --> J["Show Transcript"]
    J --> K["Continue?"]
    K -->|Yes| B
    K -->|No| L["End"]
```

#### üìã IPOË®≠Ë®à

| È†ÖÁõÆ | ÂÜÖÂÆπ |
|------|------|
| **INPUT** | Èü≥Â£∞ÂÖ•Âäõ„ÄÅ‰ºöË©±„Ç≥„É≥„ÉÜ„Ç≠„Çπ„Éà |
| **PROCESS** | STT ‚Üí AnthropicÂØæË©± ‚Üí TTS ‚Üí Èü≥Â£∞Âá∫Âäõ |
| **OUTPUT** | Èü≥Â£∞ÂøúÁ≠î„ÄÅ„ÉÜ„Ç≠„Çπ„ÉàÂ±•Ê≠¥„ÄÅ‰ºöË©±„É≠„Ç∞ |

---

### üîå safe_api_call()

#### üéØ Âá¶ÁêÜÊ¶ÇË¶Å
„É™„Éà„É©„Ç§Ê©üËÉΩ‰ªò„Åç„ÅÆÂÆâÂÖ®„Å™APIÂëº„Å≥Âá∫„Åó„É©„ÉÉ„Éë„Éº

#### üìä Âá¶ÁêÜ„ÅÆÊµÅ„Çå
```mermaid
graph TD
    A["Function Start"] --> B["Initialize Retry Count"]
    B --> C["API Call Attempt"]
    C --> D{"Success?"}
    D -->|Yes| E["Return Result"]
    D -->|No| F{"Retry Count < Max?"}
    F -->|Yes| G["Wait with Backoff"]
    F -->|No| H["Return Error"]
    G --> I["Increment Count"]
    I --> C
```

#### üìã IPOË®≠Ë®à

| È†ÖÁõÆ | ÂÜÖÂÆπ |
|------|------|
| **INPUT** | APIÈñ¢Êï∞„ÄÅÂºïÊï∞„ÄÅÊúÄÂ§ß„É™„Éà„É©„Ç§Êï∞„ÄÅ„Éê„ÉÉ„ÇØ„Ç™„ÉïË®≠ÂÆö |
| **PROCESS** | APIÂëº„Å≥Âá∫„Åó ‚Üí „Ç®„É©„ÉºÂà§ÂÆö ‚Üí „É™„Éà„É©„Ç§„É≠„Ç∏„ÉÉ„ÇØ |
| **OUTPUT** | APIÁµêÊûú„Åæ„Åü„ÅØ„Ç®„É©„ÉºÊÉÖÂ†± |

---

## ‚öôÔ∏è ÊäÄË°ì‰ªïÊßò

### üì¶ ‰æùÂ≠ò„É©„Ç§„Éñ„É©„É™

| „É©„Ç§„Éñ„É©„É™ | „Éê„Éº„Ç∏„Éß„É≥ | Áî®ÈÄî | ÈáçË¶ÅÂ∫¶ |
|-----------|-----------|------|---------|
| `streamlit` | ÊúÄÊñ∞ | üé® Web UI„Éï„É¨„Éº„É†„ÉØ„Éº„ÇØ | ‚≠ê‚≠ê‚≠ê |
| `anthropic` | ÊúÄÊñ∞ | ü§ñ Anthropic Claude API SDK | ‚≠ê‚≠ê‚≠ê |
| `openai` | ÊúÄÊñ∞ | üé§ Èü≥Â£∞Âá¶ÁêÜAPIÔºà„Éó„É¨„Éº„Çπ„Éõ„É´„ÉÄ„ÉºÔºâ | ‚≠ê‚≠ê |
| `pydub` | ÊúÄÊñ∞ | üîä Èü≥Â£∞„Éï„Ç°„Ç§„É´Âá¶ÁêÜ | ‚≠ê‚≠ê |
| `numpy` | ÊúÄÊñ∞ | üìä Èü≥Â£∞„Éá„Éº„ÇøÂá¶ÁêÜ | ‚≠ê |

### üé§ Èü≥Â£∞„Éï„Ç©„Éº„Éû„ÉÉ„ÉàÂØæÂøú

| „Éï„Ç©„Éº„Éû„ÉÉ„Éà | Êã°ÂºµÂ≠ê | „Çµ„É≥„Éó„É´„É¨„Éº„Éà | „Éì„ÉÉ„Éà„É¨„Éº„Éà | ÂÇôËÄÉ |
|------------|--------|--------------|------------|------|
| MP3 | `.mp3` | 16-48 kHz | 32-320 kbps | Êé®Â•®ÂΩ¢Âºè |
| WAV | `.wav` | 16-48 kHz | 16/24 bit | ÈùûÂúßÁ∏Æ |
| M4A | `.m4a` | 16-48 kHz | 64-256 kbps | AppleÂΩ¢Âºè |
| FLAC | `.flac` | 16-96 kHz | „É≠„Çπ„É¨„Çπ | È´òÂìÅË≥™ |

### üîä Èü≥Â£∞„É¢„Éá„É´Ë®≠ÂÆö

#### üìã TTSÈü≥Â£∞„Çø„Ç§„Éó

```python
VOICE_OPTIONS = {
    "alloy": "‰∏≠ÊÄßÁöÑ„Å™Â£∞",
    "echo": "Áî∑ÊÄßÁöÑ„Å™Â£∞",
    "fable": "Ëã±ÂõΩ„Ç¢„ÇØ„Çª„É≥„Éà",
    "onyx": "Ê∑±„ÅÑÁî∑ÊÄßÂ£∞",
    "nova": "Â•≥ÊÄßÁöÑ„Å™Â£∞",
    "shimmer": "ÂÑ™„Åó„ÅÑÂ•≥ÊÄßÂ£∞"
}

TTS_MODELS = {
    "tts-1": {"quality": "standard", "latency": "low"},
    "tts-1-hd": {"quality": "high", "latency": "medium"}
}
```

#### üìã STTË®≠ÂÆö

```python
STT_MODELS = {
    "whisper-1": {
        "languages": ["en", "ja", "es", "fr", "de", "zh"],
        "max_file_size": "25MB",
        "formats": ["mp3", "wav", "m4a", "flac"]
    }
}
```

### üíæ Èü≥Â£∞Âá¶ÁêÜ„Éë„Ç§„Éó„É©„Ç§„É≥

#### üóÇÔ∏è TTSÂá¶ÁêÜ„Éï„É≠„Éº

```python
def tts_pipeline(text: str, voice: str) -> bytes:
    # 1. „ÉÜ„Ç≠„Çπ„ÉàÂâçÂá¶ÁêÜ
    cleaned_text = preprocess_text(text)
    
    # 2. „ÉÅ„É£„É≥„ÇØÂàÜÂâ≤ÔºàÈï∑ÊñáÂØæÂøúÔºâ
    chunks = split_into_chunks(cleaned_text, max_chars=4000)
    
    # 3. ÂêÑ„ÉÅ„É£„É≥„ÇØ„ÇíTTSÂá¶ÁêÜ
    audio_segments = []
    for chunk in chunks:
        audio = generate_speech(chunk, voice)
        audio_segments.append(audio)
    
    # 4. Èü≥Â£∞ÁµêÂêà
    final_audio = concatenate_audio(audio_segments)
    
    return final_audio
```

#### üì§ STTÂá¶ÁêÜ„Éï„É≠„Éº

```python
def stt_pipeline(audio_file) -> dict:
    # 1. Èü≥Â£∞Ê§úË®º
    validate_audio(audio_file)
    
    # 2. ÂΩ¢ÂºèÂ§âÊèõÔºàÂøÖË¶Å„Å´Âøú„Åò„Å¶Ôºâ
    processed_audio = convert_if_needed(audio_file)
    
    # 3. STT APIÂëº„Å≥Âá∫„Åó
    transcript = transcribe_audio(processed_audio)
    
    # 4. ÂæåÂá¶ÁêÜ
    return {
        "text": transcript.text,
        "language": transcript.language,
        "duration": transcript.duration,
        "confidence": transcript.confidence
    }
```

---

## üö® „Ç®„É©„Éº„Éè„É≥„Éâ„É™„É≥„Ç∞

### üìÑ „Ç®„É©„ÉºÂàÜÈ°û

| „Ç®„É©„ÉºÁ®ÆÂà• | ÂéüÂõ† | ÂØæÂá¶Ê≥ï | ÂΩ±ÈüøÂ∫¶ |
|-----------|------|--------|---------|
| **ÂΩ¢Âºè„Ç®„É©„Éº** | üéµ ÈùûÂØæÂøúÈü≥Â£∞ÂΩ¢Âºè | ÂΩ¢ÂºèÂ§âÊèõ„ÉªÂÜç„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ | üü° ‰∏≠ |
| **„Çµ„Ç§„Ç∫„Ç®„É©„Éº** | üì¶ „Éï„Ç°„Ç§„É´„Çµ„Ç§„Ç∫Ë∂ÖÈÅé | „Éï„Ç°„Ç§„É´ÂàÜÂâ≤„ÉªÂúßÁ∏Æ | üü° ‰∏≠ |
| **APIÂà∂Èôê„Ç®„É©„Éº** | üö´ „É¨„Éº„ÉàÂà∂Èôê | ÂæÖÊ©ü„Éª„É™„Éà„É©„Ç§ | üî¥ È´ò |
| **Â§âÊèõ„Ç®„É©„Éº** | üîÑ Âá¶ÁêÜÂ§±Êïó | „Éë„É©„É°„Éº„ÇøË™øÊï¥ | üü° ‰∏≠ |
| **„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ„Ç®„É©„Éº** | üåê Êé•Á∂öÂïèÈ°å | ÂÜçÊé•Á∂ö„Éª„É™„Éà„É©„Ç§ | üü° ‰∏≠ |
| **Áµ±Âêà„Ç®„É©„Éº** | üîó Â§ñÈÉ®„Çµ„Éº„Éì„ÇπÂïèÈ°å | „Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØ‰ΩøÁî® | üü† ‰Ωé |

### üõ†Ô∏è „Ç®„É©„ÉºÂá¶ÁêÜÊà¶Áï•

```python
def handle_audio_error(error, context):
    if isinstance(error, FormatError):
        st.error("‚ùå „Çµ„Éù„Éº„Éà„Åï„Çå„Å¶„ÅÑ„Å™„ÅÑÈü≥Â£∞ÂΩ¢Âºè„Åß„Åô")
        st.info("ÂØæÂøúÂΩ¢Âºè: MP3, WAV, M4A, FLAC")
        suggest_conversion(error.format)
        
    elif isinstance(error, SizeError):
        st.warning("‚ö†Ô∏è „Éï„Ç°„Ç§„É´„Çµ„Ç§„Ç∫„ÅåÂà∂Èôê„ÇíË∂Ö„Åà„Å¶„ÅÑ„Åæ„Åô")
        st.info(f"ÊúÄÂ§ß„Çµ„Ç§„Ç∫: {MAX_FILE_SIZE}MB")
        suggest_compression()
        
    elif isinstance(error, APIError):
        if error.code == 429:  # Rate limit
            wait_time = calculate_backoff()
            st.info(f"‚è≥ {wait_time}ÁßíÂæå„Å´ÂÜçË©¶Ë°å„Åó„Åæ„Åô...")
            time.sleep(wait_time)
            return retry_operation(context)
        else:
            st.error(f"‚ùå API „Ç®„É©„Éº: {error.message}")
            
    return None
```

### üé® „Ç®„É©„ÉºË°®Á§∫„Éë„Çø„Éº„É≥

```python
# „Éó„É¨„Éº„Çπ„Éõ„É´„ÉÄ„ÉºÂÆüË£Ö„ÅÆÊòéÁ§∫
def show_placeholder_notice():
    with st.info_container():
        st.info("""
        ‚ÑπÔ∏è Èü≥Â£∞Ê©üËÉΩ„Éá„É¢Ôºà„Éó„É¨„Éº„Çπ„Éõ„É´„ÉÄ„ÉºÂÆüË£ÖÔºâ
        
        „Åì„ÅÆ„Éá„É¢„ÅØÈü≥Â£∞Âá¶ÁêÜÁµ±Âêà„Éë„Çø„Éº„É≥„ÇíÁ§∫„Åô„ÇÇ„ÅÆ„Åß„Åô„ÄÇ
        ÂÆüÈöõ„ÅÆÈü≥Â£∞Âá¶ÁêÜ„Å´„ÅØÂ§ñÈÉ®„Çµ„Éº„Éì„ÇπÔºàOpenAIÁ≠âÔºâ„ÅÆ
        API„Ç≠„Éº„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ
        """)
```

### üîÑ „Ç®„É©„ÉºÂæ©Êóß„Éï„É≠„Éº

```mermaid
graph TD
    A["Audio Operation"] --> B{"Validation"}
    B -->|Invalid| C["Format Error"]
    B -->|Valid| D["API Call"]
    C --> E["Suggest Fix"]
    E --> F["User Action"]
    F --> A
    
    D --> G{"API Success?"}
    G -->|No| H{"Error Type"}
    G -->|Yes| I["Process Result"]
    
    H -->|Rate Limit| J["Wait & Retry"]
    H -->|Format| K["Convert & Retry"]
    H -->|Network| L["Reconnect"]
    
    J --> D
    K --> D
    L --> D
    
    I --> M["Display Output"]
```

---

## üéâ „Åæ„Å®„ÇÅ

„Åì„ÅÆË®≠Ë®àÊõ∏„ÅØ„ÄÅ**a04_audio_speeches.py** „ÅÆÂåÖÊã¨ÁöÑ„Å™ÊäÄË°ì‰ªïÊßò„Å®ÂÆüË£ÖË©≥Á¥∞„ÇíÁ∂≤ÁæÖ„Åó„ÅüÂÆåÂÖ®„Éâ„Ç≠„É•„É°„É≥„Éà„Åß„Åô„ÄÇ

### üåü Ë®≠Ë®à„ÅÆ„Éè„Ç§„É©„Ç§„Éà

- **üé§ ÂåÖÊã¨ÁöÑÈü≥Â£∞Âá¶ÁêÜ**: TTS/STT/ÁøªË®≥/„É™„Ç¢„É´„Çø„Ç§„É†ÂØæÂøú
- **üîó Áµ±Âêà„Éë„Çø„Éº„É≥**: Â§ñÈÉ®Èü≥Â£∞„Çµ„Éº„Éì„Çπ„Å®„ÅÆÈÄ£Êê∫Ë®≠Ë®à
- **ü§ñ „ÉÅ„Çß„Éº„É≥Âá¶ÁêÜ**: Èü≥Â£∞„Ç®„Éº„Ç∏„Çß„É≥„Éà„Éë„Ç§„Éó„É©„Ç§„É≥
- **üõ°Ô∏è Â†ÖÁâ¢ÊÄß**: „É™„Éà„É©„Ç§Ê©üËÉΩ‰ªò„Åç„Ç®„É©„Éº„Éè„É≥„Éâ„É™„É≥„Ç∞
- **üìä „Éó„É¨„Éº„Çπ„Éõ„É´„ÉÄ„ÉºË®≠Ë®à**: ÂÆüË£Ö„Éë„Çø„Éº„É≥„ÅÆÊòéÁ¢∫„Å™ÊèêÁ§∫

### üîß „Ç¢„Éº„Ç≠„ÉÜ„ÇØ„ÉÅ„É£ÁâπÂæ¥

- **üì¶ „É¢„Ç∏„É•„Éº„É´ÊßãÊàê**: Èü≥Â£∞Âá¶ÁêÜ„Çø„Ç§„ÉóÂà•„ÅÆÁã¨Á´ãÂÆüË£Ö
- **üîÑ APIÊäΩË±°Âåñ**: Ë§áÊï∞Èü≥Â£∞„Çµ„Éº„Éì„Çπ„Å∏„ÅÆÂØæÂøúÊ∫ñÂÇô
- **üíæ „Çª„ÉÉ„Ç∑„Éß„É≥ÁÆ°ÁêÜ**: Èü≥Â£∞‰ºöË©±„ÅÆÁä∂ÊÖã‰øùÊåÅ
- **üé® UI/UX**: Èü≥Â£∞Âõ∫Êúâ„ÅÆ„Ç§„É≥„Çø„Éº„Éï„Çß„Éº„ÇπË¶ÅÁ¥†